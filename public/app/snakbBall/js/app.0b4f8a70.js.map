{"version":3,"file":"js/app.0b4f8a70.js","mappings":"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","sources":["webpack://snakeball/./src/stores/global.js","webpack://snakeball/./src/components/sections/welcome.vue","webpack://snakeball/./src/components/sections/welcome.vue?bf6f","webpack://snakeball/./src/components/ui/closebtn.vue","webpack://snakeball/./src/components/ui/closebtn.vue?c5d6","webpack://snakeball/./src/components/sections/start.vue","webpack://snakeball/./src/components/sections/start.vue?311b","webpack://snakeball/./src/components/instrutions/i1.vue","webpack://snakeball/./src/components/instrutions/i1.vue?2c96","webpack://snakeball/./src/components/instrutions/i2.vue","webpack://snakeball/./src/components/instrutions/i2.vue?f906","webpack://snakeball/./src/components/instrutions/i3.vue","webpack://snakeball/./src/components/instrutions/i3.vue?c4c3","webpack://snakeball/./src/components/instrutions/i4.vue","webpack://snakeball/./src/components/instrutions/i4.vue?8ea9","webpack://snakeball/./src/components/sections/instrution.vue","webpack://snakeball/./src/components/sections/instrution.vue?efb2","webpack://snakeball/./src/components/sections/rank.vue","webpack://snakeball/./src/components/sections/rank.vue?b615","webpack://snakeball/./src/components/layout/background.vue","webpack://snakeball/./src/components/layout/background.vue?06ec","webpack://snakeball/./src/components/layout/menu.vue","webpack://snakeball/./src/components/layout/menu.vue?5014","webpack://snakeball/./src/components/layout/loading.vue","webpack://snakeball/./src/components/layout/loading.vue?3a25","webpack://snakeball/./src/components/game/resettip.vue","webpack://snakeball/./src/components/game/resettip.vue?3d21","webpack://snakeball/./src/components/game/readytips.vue","webpack://snakeball/./src/components/game/readytips.vue?61f8","webpack://snakeball/./src/components/game/summary.vue","webpack://snakeball/./src/components/game/summary.vue?0d21","webpack://snakeball/./src/components/game/databox.vue","webpack://snakeball/./src/components/game/databox.vue?d01c","webpack://snakeball/./src/components/game/stage.vue","webpack://snakeball/./src/components/game/stage.vue?33a5","webpack://snakeball/./src/App.vue","webpack://snakeball/./src/main.js","webpack://snakeball/webpack/bootstrap","webpack://snakeball/webpack/runtime/chunk loaded","webpack://snakeball/webpack/runtime/compat get default export","webpack://snakeball/webpack/runtime/define property getters","webpack://snakeball/webpack/runtime/global","webpack://snakeball/webpack/runtime/hasOwnProperty shorthand","webpack://snakeball/webpack/runtime/publicPath","webpack://snakeball/webpack/runtime/jsonp chunk loading","webpack://snakeball/webpack/startup"],"sourcesContent":["import { defineStore } from 'pinia'\r\nimport { Howl } from \"howler\";\r\nexport const global = defineStore('global', {\r\n    state: () => ({\r\n        // 是否为safari浏览器\r\n        if_safari: /^((?!chrome|android).)*safari/i.test(navigator.userAgent)\r\n            && !navigator.userAgent.includes('CriOS')\r\n            && typeof InstallTrigger === 'undefined',\r\n        // 玩家数据\r\n        player: {\r\n            id: null,\r\n            name: null,\r\n            rank: 0,\r\n            wave: 1,\r\n            lives: 0,\r\n            score: null,\r\n            time: 0,\r\n            if_active: false,\r\n        },\r\n        // 音频控制器\r\n        audio_controller: {\r\n            // musics\r\n            hall: new Howl({\r\n                src: require(\"@/assets/audios/musics/hall.mp3\"),\r\n                preload: true,\r\n                loop: true,\r\n            }),\r\n            gameing: new Howl({\r\n                src: require(\"@/assets/audios/musics/gameing.mp3\"),\r\n                preload: true,\r\n                loop: true,\r\n            }),\r\n            win: new Howl({\r\n                src: require(\"@/assets/audios/musics/win.mp3\"),\r\n                preload: true,\r\n            }),\r\n            fail: new Howl({\r\n                src: require(\"@/assets/audios/musics/fail.mp3\"),\r\n                preload: true,\r\n            }),\r\n            // effects\r\n            button: new Howl({\r\n                src: require(\"@/assets/audios/effects/button.mp3\"),\r\n                preload: true,\r\n            }),\r\n            ready: new Howl({\r\n                src: require(\"@/assets/audios/effects/ready.mp3\"),\r\n                preload: true,\r\n            }),\r\n            reset: new Howl({\r\n                src: require(\"@/assets/audios/effects/reset.mp3\"),\r\n                preload: true,\r\n            }),\r\n            buff: new Howl({\r\n                src: require(\"@/assets/audios/effects/buff.mp3\"),\r\n                preload: true,\r\n            }),\r\n            warn: new Howl({\r\n                src: require(\"@/assets/audios/effects/warn.mp3\"),\r\n                preload: true,\r\n            }),\r\n            // blasts\r\n            blasts: [\r\n                new Howl({\r\n                    src: require(\"@/assets/audios/blasts/blast1.mp3\"),\r\n                    preload: true,\r\n                }),\r\n                new Howl({\r\n                    src: require(\"@/assets/audios/blasts/blast2.mp3\"),\r\n                    preload: true,\r\n                }),\r\n                new Howl({\r\n                    src: require(\"@/assets/audios/blasts/blast3.mp3\"),\r\n                    preload: true,\r\n                }),\r\n                new Howl({\r\n                    src: require(\"@/assets/audios/blasts/blast4.mp3\"),\r\n                    preload: true,\r\n                }),\r\n                new Howl({\r\n                    src: require(\"@/assets/audios/blasts/blast5.mp3\"),\r\n                    preload: true,\r\n                }),\r\n            ],\r\n        },\r\n        // loading\r\n        hidden_loading: null,\r\n        // welcome\r\n        show_welcome: null,\r\n        hidden_welcome: null,\r\n        // start\r\n        show_start: null,\r\n        hidden_start: null,\r\n        // instrution\r\n        show_instrution: null,\r\n        // rank\r\n        show_rank: null,\r\n        // stage\r\n        ready_to_game: null,\r\n        hidden_summary: null,\r\n        // databox\r\n        show_databox: null,\r\n        hidden_databox: null,\r\n        // menu\r\n        show_menu: null,\r\n        hidden_menu: null,\r\n    }),\r\n    actions: {\r\n        // 初始化玩家信息\r\n        init_player_data(name) {\r\n            this.player.id = Date.now() + Math.random().toString(36).substring(2, 10);\r\n            this.player.name = name;\r\n            this.player.if_active = false;\r\n        },\r\n        // 初次加载：从loading进入界面\r\n        first_show() {\r\n            this.hidden_loading(() => {\r\n                this.show_welcome();\r\n                this.audio_controller.button.play();\r\n                this.audio_controller.hall.play()\r\n            });\r\n        },\r\n        // 从welcome进入到start\r\n        welcome_to_start() {\r\n            this.hidden_welcome(() => {\r\n                this.show_start();\r\n                this.audio_controller.button.play();\r\n            });\r\n        },\r\n        // 从start返回到welcome\r\n        start_to_welcome() {\r\n            this.hidden_start(() => {\r\n                this.show_welcome();\r\n            });\r\n        },\r\n        // 从start开始新的游戏\r\n        start_new_game() {\r\n            this.hidden_start(() => {\r\n                this.hidden_menu();\r\n                this.audio_controller.hall.stop();\r\n                this.audio_controller.button.play();\r\n            }, () => {\r\n                this.show_databox();\r\n                this.ready_to_game();\r\n                this.audio_controller.ready.play();\r\n            });\r\n        },\r\n        // 从welcome继续游戏\r\n        welcome_continue_game() {\r\n            this.hidden_welcome(() => {\r\n                this.hidden_menu();\r\n                this.audio_controller.hall.stop();\r\n                this.audio_controller.button.play();\r\n            }, () => {\r\n                this.show_databox();\r\n                this.ready_to_game();\r\n                this.audio_controller.ready.play();\r\n            });\r\n        },\r\n        // 从summary返回到welcome\r\n        summary_to_welcome() {\r\n            this.hidden_summary(() => {\r\n                this.show_welcome();\r\n                this.hidden_databox();\r\n                this.show_menu();\r\n            });\r\n        },\r\n        // 从summary继续游戏\r\n        summary_continue_game() {\r\n            this.hidden_summary(() => {\r\n                this.audio_controller.hall.stop();\r\n                this.audio_controller.button.play();\r\n            }, () => {\r\n                this.ready_to_game();\r\n                this.audio_controller.ready.play();\r\n            });\r\n        },\r\n    }\r\n})\r\n","<template>\r\n    <div class=\"weclome _fullscreen\" :class=\"{'_hidden':!welcome.if_visible.value}\">\r\n        <div class=\"weclome_middle\">\r\n            <div class=\"weclome_middle_title\">\r\n                <div>\r\n                    <p class=\"_font_6\" v-for=\"letter in 'SNAKE'\" :key=\"letter\">{{letter}}</p>\r\n                </div>\r\n                <div>\r\n                    <p class=\"_font_6\" v-for=\"letter in 'BALL'\" :key=\"letter\">{{letter}}</p>\r\n                </div>\r\n            </div>\r\n            <p class=\"weclome_middle_info _font_3\">Let's bump up! dodge, bump, reset, and score!</p>\r\n            <!-- safari浏览器对css的filter适配不友好，这里检测到如果是safari浏览器，则取消滤镜融球效果 -->\r\n            <div class=\"weclome_middle_balls\" :class=\"{'weclome_middle_balls_filter':!store.if_safari}\">\r\n                <div class=\"weclome_middle_balls_big _middle_ball\"></div>\r\n                <div class=\"weclome_middle_balls_small\" style=\"--s:1\"></div>\r\n                <div class=\"weclome_middle_balls_small\" style=\"--s:1.5\"></div>\r\n                <div class=\"weclome_middle_balls_small\" style=\"--s:1.2\"></div>\r\n            </div>\r\n            <svg class=\"weclome_middle_line\" viewBox=\"0 0 50 50\">\r\n                <circle class=\"_dashed\" cx=\"25\" cy=\"25\" r=\"25\" vector-effect=\"non-scaling-stroke\" />\r\n            </svg>\r\n        </div>\r\n        <div class=\"welcome_nav\">\r\n            <svg class=\"welcome_nav_line\" viewBox=\"0 0 50 50\">\r\n                <circle class=\"_dashed\" cx=\"25\" cy=\"25\" r=\"25\" vector-effect=\"non-scaling-stroke\" />\r\n            </svg>\r\n            <div class=\"welcome_nav_selection\" style=\"--i:0\">\r\n                <div class=\"wns_node\" @click=\"store.welcome_to_start\">\r\n                    <div></div>\r\n                    <p class=\"_font_2\">NEW GAME</p>\r\n                </div>\r\n            </div>\r\n            <div class=\"welcome_nav_selection\" style=\"--i:1\">\r\n                <div class=\"wns_node\" @click=\"store.welcome_continue_game\" :class=\"{'wns_unclickable':!player.if_active}\">\r\n                    <div></div>\r\n                    <p class=\"_font_2\">CONTINUE</p>\r\n                </div>\r\n            </div>\r\n            <div class=\"welcome_nav_selection\" style=\"--i:2\">\r\n                <div class=\"wns_node\" @click=\"store.show_rank\">\r\n                    <div></div>\r\n                    <p class=\"_font_2\">RANK</p>\r\n                </div>\r\n            </div>\r\n            <div class=\"welcome_nav_selection\" style=\"--i:3\">\r\n                <div class=\"wns_node\" @click=\"store.show_instrution\">\r\n                    <div></div>\r\n                    <p class=\"_font_2\">INSTRUTION</p>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { global } from \"@/stores/global\";\r\nimport { onMounted, ref } from \"vue\";\r\nimport gsap from \"gsap\";\r\nconst store = global();\r\nconst player = store.player;\r\n// welcome控制对象\r\nconst welcome = {\r\n    // DOM元素\r\n    container: null,\r\n    middle: null,\r\n    title: null,\r\n    bigball: null,\r\n    smallballs: null,\r\n    line: null,\r\n    balls: null,\r\n    title_letters: null,\r\n    nav: null,\r\n    info: null,\r\n    // 小球能够移动的最大距离\r\n    max_distance: 0,\r\n    animater: null, //动画播放器\r\n    if_visible: ref(false), //welcome是否可见\r\n    init() {\r\n        this.container = document.querySelector(\".weclome\");\r\n        this.middle = document.querySelector(\".weclome_middle\");\r\n        this.title = document.querySelector(\".weclome_middle_title\");\r\n        this.bigball = document.querySelector(\".weclome_middle_balls_big\");\r\n        this.smallballs = document.querySelectorAll(\".weclome_middle_balls_small\");\r\n        this.line = document.querySelector(\".weclome_middle_line\");\r\n        this.balls = document.querySelector(\".weclome_middle_balls\");\r\n        this.title_letters = document.querySelectorAll(\".weclome_middle_title p\");\r\n        this.nav = document.querySelector(\".welcome_nav\");\r\n        this.info = document.querySelector(\".weclome_middle_info\");\r\n        window.addEventListener(\"resize\", this.resize.bind(this));\r\n        this.resize();\r\n        this.binded_events();\r\n    },\r\n    resize() {\r\n        // 小球的移动范围局限在大球的周围\r\n        this.max_distance = this.bigball.offsetWidth / 2.5;\r\n    },\r\n    // 绑定相关事件\r\n    binded_events() {\r\n        // 在界面范围内：标题文字跟随鼠标/手指偏移\r\n        this.container.onmousemove = (e) => {\r\n            this.move_title(e.x, e.y);\r\n        };\r\n        this.container.ontouchmove = (e) => {\r\n            this.move_title(e.touches[0].clientX, e.touches[0].clientY);\r\n        };\r\n        // 移动结束后，让标题回到原位，即屏幕中心点\r\n        this.container.onmouseout = (e) => {\r\n            this.move_title(innerWidth / 2, innerHeight / 2);\r\n        };\r\n        this.container.ontouchend = (e) => {\r\n            this.move_title(innerWidth / 2, innerHeight / 2);\r\n        };\r\n        // 在靠近中间内容的范围内：小球跟随鼠标/手指偏移，形成融球效果\r\n        this.middle.onmousemove = (e) => {\r\n            this.move_smallballs(e.x, e.y);\r\n        };\r\n        this.middle.ontouchmove = (e) => {\r\n            this.move_smallballs(e.touches[0].clientX, e.touches[0].clientY);\r\n        };\r\n        // 移动结束后，让小球回到原位，即屏幕中心点\r\n        this.middle.onmouseout = (e) => {\r\n            this.move_smallballs(innerWidth / 2, innerHeight / 2);\r\n        };\r\n        this.middle.ontouchend = (e) => {\r\n            this.move_smallballs(innerWidth / 2, innerHeight / 2);\r\n        };\r\n    },\r\n    // 移动标题文字\r\n    move_title(x, y) {\r\n        // 更新距离:以屏幕中心为基准。将距离与屏幕尺寸绑定：避免不同尺寸下移动距离差异过大\r\n        let distance_x = ((x - innerWidth / 2) / innerWidth) * 40;\r\n        let distance_y = ((y - innerHeight / 2) / innerHeight) * 40;\r\n        // 移动标题\r\n        gsap.to(this.title, {\r\n            x: `${distance_x}px`,\r\n            y: `${distance_y}px`,\r\n            duration: 3,\r\n            ease: \"power3.out\",\r\n        });\r\n    },\r\n    // 移动小球\r\n    move_smallballs(x, y) {\r\n        // 更新距离:以屏幕中心为基准\r\n        let distance_x = x - innerWidth / 2;\r\n        let distance_y = y - innerHeight / 2;\r\n        // 限制移动边界\r\n        distance_x = Math.min(this.max_distance, Math.max(-this.max_distance, distance_x));\r\n        distance_y = Math.min(this.max_distance, Math.max(-this.max_distance, distance_y));\r\n        // 移动小球\r\n        gsap.to(this.smallballs, {\r\n            x: `${distance_x}px`,\r\n            y: `${distance_y}px`,\r\n            duration: 1,\r\n            ease: \"power3.out\",\r\n            stagger: 0.1,\r\n        });\r\n    },\r\n    // 重置welcome动画样式\r\n    reset() {\r\n        gsap.timeline()\r\n            .set(this.line, {\r\n                scale: 0,\r\n                opacity: 1,\r\n            })\r\n            .set(this.balls, {\r\n                scale: 0,\r\n                opacity: 1,\r\n            })\r\n            .set(this.title_letters, {\r\n                clipPath: \"circle(0%)\",\r\n                y: \"50%\",\r\n            })\r\n            .set([this.nav, this.info], {\r\n                opacity: 0,\r\n            });\r\n        this.nav.classList.remove(\"welcome_nav_show\");\r\n    },\r\n    // 显示welcome\r\n    show() {\r\n        // 动画播放器存在且正在播放动画：不执行函数，否则会因为动画冲突导致BUG\r\n        if (this.animater && this.animater.isActive()) return;\r\n        this.reset(); //重置\r\n        this.if_visible.value = true; // 显示welcome\r\n        // 播放动画\r\n        this.animater = gsap\r\n            .timeline()\r\n            .to(this.line, {\r\n                scale: 1,\r\n                duration: 1.5,\r\n                ease: \"power3.inOut\",\r\n            })\r\n            .to(\r\n                this.balls,\r\n                {\r\n                    scale: 1,\r\n                    duration: 1.5,\r\n                    ease: \"power3.inOut\",\r\n                },\r\n                \"<0.3\"\r\n            )\r\n            .to(\r\n                this.title_letters,\r\n                {\r\n                    clipPath: \"circle(100%)\",\r\n                    y: 0,\r\n                    duration: 0.8,\r\n                    ease: \"power3.out\",\r\n                    stagger: {\r\n                        each: 0.05,\r\n                        from: \"random\",\r\n                    },\r\n                },\r\n                \"<0.8\"\r\n            )\r\n            .to(\r\n                [this.nav, this.info],\r\n                {\r\n                    opacity: 1,\r\n                    duration: 1.2,\r\n                    ease: \"power3.out\",\r\n                    onStart: () => {\r\n                        // nav选项栏因为要适应不同尺寸以旋转，所以不能直接用gsap控制，否则无法响应旋转角度\r\n                        // 这里只能用类名控制，welcome_nav_show会根据不同尺寸而通过媒体查询改变角度\r\n                        this.nav.classList.add(\"welcome_nav_show\");\r\n                    },\r\n                },\r\n                \"<\"\r\n            );\r\n    },\r\n    // 隐藏welcome\r\n    hidden(immediate, next) {\r\n        // 动画播放器存在且正在播放动画：不执行函数，否则会因为动画冲突导致BUG\r\n        if (this.animater && this.animater.isActive()) return;\r\n        if (immediate) immediate(); //存在立即执行代码，则立即执行\r\n        // 播放动画\r\n        this.animater = gsap\r\n            .timeline()\r\n            .to(this.line, {\r\n                opacity: 0,\r\n                duration: 0.8,\r\n                ease: \"power3.out\",\r\n            })\r\n            .to(\r\n                this.balls,\r\n                {\r\n                    opacity: 0,\r\n                    duration: 0.8,\r\n                    ease: \"power3.out\",\r\n                },\r\n                \"<\"\r\n            )\r\n            .to(\r\n                this.title_letters,\r\n                {\r\n                    clipPath: \"circle(0%)\",\r\n                    y: \"-50%\",\r\n                    duration: 0.5,\r\n                    ease: \"power3.out\",\r\n                    stagger: {\r\n                        each: 0.03,\r\n                        from: \"random\",\r\n                    },\r\n                },\r\n                \"<\"\r\n            )\r\n            .to(\r\n                [this.nav, this.info],\r\n                {\r\n                    opacity: 0,\r\n                    duration: 0.8,\r\n                    ease: \"power3.out\",\r\n                    onComplete: () => {\r\n                        this.if_visible.value = false; //隐藏welcome\r\n                        if (next) next(); //如果有后续函数，则执行\r\n                    },\r\n                },\r\n                \"<\"\r\n            );\r\n    },\r\n};\r\n// 储存全局功能函数\r\nstore.show_welcome = welcome.show.bind(welcome);\r\nstore.hidden_welcome = welcome.hidden.bind(welcome);\r\nonMounted(() => {\r\n    welcome.init();\r\n});\r\n</script>\r\n\r\n<style scoped>\r\n.weclome {\r\n    --scale: 1;\r\n    justify-content: center;\r\n    align-items: center;\r\n}\r\n.weclome_middle {\r\n    position: relative;\r\n    justify-content: center;\r\n    align-items: center;\r\n    width: calc(var(--scale) * 82rem);\r\n    height: calc(var(--scale) * 55rem);\r\n}\r\n.weclome_middle_title {\r\n    flex-direction: column;\r\n    position: absolute;\r\n    color: var(--color_white);\r\n    mix-blend-mode: exclusion;\r\n    z-index: 10;\r\n}\r\n.weclome_middle_title > div:nth-child(1) {\r\n    margin-right: calc(var(--scale) * 15rem);\r\n}\r\n.weclome_middle_title > div:nth-child(2) {\r\n    justify-content: end;\r\n    margin-left: calc(var(--scale) * 15rem);\r\n}\r\n.weclome_middle_title p {\r\n    font-family: title;\r\n    line-height: calc(var(--scale) * 17rem);\r\n}\r\n.weclome_middle_info {\r\n    position: absolute;\r\n    left: 0;\r\n    bottom: 0;\r\n    width: 40%;\r\n    color: var(--color_white);\r\n    line-height: calc(var(--scale) * 3.5rem);\r\n    mix-blend-mode: exclusion;\r\n    z-index: 10;\r\n}\r\n.weclome_middle_balls {\r\n    position: absolute;\r\n    justify-content: center;\r\n    align-items: center;\r\n    width: calc(var(--scale) * 85rem);\r\n    height: calc(var(--scale) * 85rem);\r\n}\r\n\r\n.weclome_middle_balls div {\r\n    position: absolute;\r\n}\r\n.weclome_middle_balls_filter {\r\n    filter: contrast(1000%);\r\n    background-color: var(--color_back);\r\n    mix-blend-mode: var(--mix);\r\n}\r\n.weclome_middle_balls_filter div {\r\n    filter: blur(calc(var(--scale) * 3rem));\r\n}\r\n\r\n.weclome_middle_balls_small {\r\n    width: calc(var(--scale) * 15rem * var(--s));\r\n    height: calc(var(--scale) * 15rem * var(--s));\r\n    background-color: var(--color_front);\r\n    border-radius: 100%;\r\n}\r\n.weclome_middle_line {\r\n    position: absolute;\r\n    width: calc(var(--scale) * 66rem);\r\n    overflow: visible;\r\n}\r\n.weclome_middle_line circle {\r\n    stroke: var(--color_front);\r\n    stroke-dasharray: 0 calc(var(--scale) * 2rem);\r\n    transform-origin: center;\r\n    animation: welcome_line_rotate 8s linear infinite;\r\n}\r\n.welcome_nav {\r\n    /* 整个选项框显示前的旋转度数 */\r\n    --before_rotate: 45deg;\r\n    /* 整个选项框显示后的旋转度数 */\r\n    --after_rotate: 0deg;\r\n    /* 每一个选项的间隔旋转度数 */\r\n    --interval_rotate: 12deg;\r\n    /* 每一个选项屏幕比例修改后的修正旋转度数 */\r\n    --correct_rotate: 0deg;\r\n    position: absolute;\r\n    justify-content: center;\r\n    align-items: center;\r\n    width: calc(var(--scale) * 135rem);\r\n    height: calc(var(--scale) * 135rem);\r\n    transform: rotate(var(--before_rotate));\r\n    pointer-events: none;\r\n}\r\n.welcome_nav_show {\r\n    transform: rotate(var(--after_rotate));\r\n    transition: transform 1.2s var(--ease_out);\r\n}\r\n\r\n.welcome_nav_line {\r\n    position: absolute;\r\n    width: 100%;\r\n    overflow: visible;\r\n    animation: welcome_line_rotate 15s linear infinite;\r\n}\r\n.welcome_nav_line circle {\r\n    stroke: var(--color_front);\r\n    stroke-dasharray: 0 calc(var(--scale) * 2rem);\r\n}\r\n.welcome_nav_selection {\r\n    position: absolute;\r\n    width: 100%;\r\n    height: 100%;\r\n    justify-content: center;\r\n    align-items: center;\r\n    transform-origin: center;\r\n    transform: rotate(calc(var(--interval_rotate) * var(--i)));\r\n}\r\n\r\n.wns_node {\r\n    position: absolute;\r\n    align-items: center;\r\n    left: 99.7%;\r\n    height: calc(var(--scale) * 7rem);\r\n    transform-origin: left;\r\n    transform: rotate(calc(var(--interval_rotate) * var(--i) * -1 - var(--correct_rotate)));\r\n    pointer-events: all;\r\n    cursor: pointer;\r\n}\r\n\r\n.wns_node div {\r\n    position: relative;\r\n    justify-content: center;\r\n    align-items: center;\r\n    width: calc(var(--scale) * 1rem);\r\n    height: calc(var(--scale) * 1rem);\r\n    background-color: var(--color_front);\r\n    border-radius: 100%;\r\n    margin-right: calc(var(--scale) * 1rem);\r\n}\r\n.wns_node div::after {\r\n    content: \"\";\r\n    position: absolute;\r\n    width: 200%;\r\n    height: 200%;\r\n    border: calc(var(--scale) * 0.05rem) solid var(--color_front);\r\n    border-radius: 100%;\r\n    transform: scale(0);\r\n    transition: transform 0.5s var(--ease_out);\r\n}\r\n.wns_node p {\r\n    align-self: end;\r\n    color: var(--color_front);\r\n    white-space: nowrap;\r\n    transition: transform 0.5s var(--ease_out);\r\n}\r\n.wns_unclickable {\r\n    pointer-events: none;\r\n    cursor: auto;\r\n}\r\n.wns_unclickable div {\r\n    background-color: var(--color_gray);\r\n}\r\n.wns_unclickable p {\r\n    color: var(--color_gray);\r\n}\r\n@media (hover: hover) {\r\n    .wns_node:hover div::after {\r\n        transform: scale(1);\r\n    }\r\n    .wns_node:hover p {\r\n        transform: translateX(5%);\r\n    }\r\n}\r\n@keyframes welcome_line_rotate {\r\n    0% {\r\n        transform: rotate(0deg);\r\n    }\r\n    100% {\r\n        transform: rotate(360deg);\r\n    }\r\n}\r\n@media screen and (max-aspect-ratio: 1/1) {\r\n    .welcome_nav {\r\n        --interval_rotate: 25deg;\r\n        --before_rotate: 5deg;\r\n        --after_rotate: 60deg;\r\n        --correct_rotate: 60deg;\r\n        width: calc(var(--scale) * 135rem * 0.9);\r\n        height: calc(var(--scale) * 135rem * 0.9);\r\n    }\r\n    .wns_node {\r\n        left: 100%;\r\n    }\r\n}\r\n</style>","import script from \"./welcome.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./welcome.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./welcome.vue?vue&type=style&index=0&id=81b3007a&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-81b3007a\"]])\n\nexport default __exports__","<template>\r\n    <div class=\"closebtn\" :class=\"{'closebtn_reverse':if_reverse}\">\r\n        <div class=\"closebtn_part\" style=\"--a:0deg\">\r\n            <div></div>\r\n        </div>\r\n        <div class=\"closebtn_part\" style=\"--a:90deg\">\r\n            <div></div>\r\n        </div>\r\n        <div class=\"closebtn_part\" style=\"--a:180deg\">\r\n            <div></div>\r\n        </div>\r\n        <div class=\"closebtn_part\" style=\"--a:270deg\">\r\n            <div></div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script setup>\r\n//是否翻转颜色\r\nconst props = defineProps({ if_reverse: Boolean });\r\nconst if_reverse = props.if_reverse;\r\n</script>\r\n\r\n<style scoped>\r\n.closebtn {\r\n    --scale: 1;\r\n    --color: var(--color_back);\r\n    position: relative;\r\n    justify-content: center;\r\n    align-items: center;\r\n    width: calc(var(--scale) * 5rem);\r\n    height: calc(var(--scale) * 5rem);\r\n    cursor: pointer;\r\n}\r\n/* 反转颜色 */\r\n.closebtn_reverse {\r\n    --color: var(--color_front);\r\n}\r\n.closebtn_part {\r\n    position: absolute;\r\n    width: calc(var(--scale) * 1.9rem);\r\n    height: calc(var(--scale) * 1.9rem);\r\n    transform-origin: center;\r\n    transform: rotate(var(--a));\r\n}\r\n.closebtn_part div {\r\n    position: absolute;\r\n    left: 0;\r\n    top: 0;\r\n    width: calc(var(--scale) * 0.8rem);\r\n    height: calc(var(--scale) * 0.8rem);\r\n    border-radius: 100%;\r\n    background-color: var(--color);\r\n    transform-origin: right bottom;\r\n    transition: transform 0.5s var(--ease_out);\r\n}\r\n.closebtn_part div::after {\r\n    content: \"\";\r\n    position: absolute;\r\n    left: calc(var(--scale) * -1rem);\r\n    top: calc(var(--scale) * -1rem);\r\n    width: calc(var(--scale) * 1rem);\r\n    height: calc(var(--scale) * 1rem);\r\n    border-radius: 100%;\r\n    background-color: var(--color);\r\n    transform-origin: right bottom;\r\n    transition: transform 0.5s var(--ease_out);\r\n}\r\n@media (hover: hover) {\r\n    .closebtn:hover .closebtn_part div {\r\n        transform: scale(0.6);\r\n    }\r\n    .closebtn:hover .closebtn_part div::after {\r\n        transform: scale(1.8);\r\n    }\r\n}\r\n</style>","import script from \"./closebtn.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./closebtn.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./closebtn.vue?vue&type=style&index=0&id=60fbd1c4&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-60fbd1c4\"]])\n\nexport default __exports__","<template>\r\n    <div class=\"start _fullscreen\" v-show=\"start.if_visible.value\">\r\n        <div class=\"start_background\">\r\n            <svg class=\"start_background_line\" viewBox=\"0 0 50 50\">\r\n                <circle class=\"_dashed\" cx=\"25\" cy=\"25\" r=\"25\" vector-effect=\"non-scaling-stroke\" />\r\n            </svg>\r\n            <svg class=\"start_background_line\" viewBox=\"0 0 50 50\">\r\n                <circle class=\"_dashed\" cx=\"25\" cy=\"25\" r=\"25\" vector-effect=\"non-scaling-stroke\" />\r\n            </svg>\r\n            <div class=\"start_background_ball _middle_ball\"></div>\r\n        </div>\r\n        <div class=\"start_inner\">\r\n            <p class=\"start_usetip _font_2\" @click=\"store.show_instrution\">HOW TO PLAY?</p>\r\n            <div class=\"start_inputbox\">\r\n                <input class=\"start_inputbox_input _font_4\" type=\"text\" placeholder=\"INPUT YOUR NAME\" v-model=\"start.input_text.value\" />\r\n                <div class=\"start_inputbox_background\">\r\n                    <div class=\"start_inputbox_background_balls\">\r\n                        <div>\r\n                            <div v-for=\"index in 15\" :key=\"index\"></div>\r\n                        </div>\r\n                        <div>\r\n                            <div v-for=\"index in 15\" :key=\"index\"></div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <p class=\"start_startbtn _font_1\" @click=\"start.check_input\">\r\n                — Click the\r\n                <span class=\"_font_1\">Enter key</span> to start —\r\n            </p>\r\n            <div class=\"start_closebtn\" @click=\"store.start_to_welcome\">\r\n                <Closebtn />\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { global } from \"@/stores/global\";\r\nimport Closebtn from \"@/components/ui/closebtn.vue\";\r\nimport { onMounted, ref } from \"vue\";\r\nimport gsap from \"gsap\";\r\nconst store = global();\r\nconst player = store.player;\r\n// start控制对象\r\nconst start = {\r\n    // DOM元素\r\n    container: null,\r\n    inputbox: null,\r\n    background: null,\r\n    usetip: null,\r\n    closebtn: null,\r\n    ball: null,\r\n    input: null,\r\n    //输入框文字\r\n    input_text: ref(\"\"),\r\n    max_text_length: 14, //最大可输入字符长度\r\n    animater: null, //动画播放器\r\n    if_visible: ref(false), //start是否可见\r\n    init() {\r\n        this.container = document.querySelector(\".start\");\r\n        this.inputbox = document.querySelector(\".start_inputbox\");\r\n        this.background = document.querySelector(\".start_background\");\r\n        this.usetip = document.querySelector(\".start_usetip\");\r\n        this.closebtn = document.querySelector(\".start_closebtn\");\r\n        this.ball = document.querySelector(\".start_background_ball\");\r\n        this.input = document.querySelector(\".start_inputbox_input\");\r\n        // 监听键盘按键\r\n        this.input.addEventListener(\"keyup\", (e) => {\r\n            // 裁剪限制字符数\r\n            if (this.input_text.value.length > this.max_text_length)\r\n                this.input_text.value = this.input_text.value.slice(0, this.max_text_length);\r\n            // 点击enter，检查输入框是否进入游戏\r\n            else {\r\n                if (e.keyCode == 13) this.check_input();\r\n            }\r\n        });\r\n    },\r\n    // 检查输入框内容\r\n    check_input() {\r\n        // 规范输入内容：玩家可能用特殊方式更改输入内容，故在检查之前再裁剪一下\r\n        this.input_text.value = this.input_text.value.slice(0, this.max_text_length);\r\n        let input_text = this.input_text.value.trim();\r\n        // 检查输入框内容规范后是否为空字符\r\n        if (input_text.length) {\r\n            // 不为空则初始化玩家信息，开始游戏\r\n            store.init_player_data(input_text);\r\n            store.start_new_game();\r\n        } else {\r\n            // 为空则进行提示\r\n            this.input_text.value = \"\"; //清空输入框\r\n            store.audio_controller.warn.play(); //播放警示音\r\n            // 小球警示样式\r\n            gsap.timeline()\r\n                .set(this.ball, {\r\n                    backgroundColor: \"#b80808\",\r\n                })\r\n                .set(\r\n                    this.ball,\r\n                    {\r\n                        backgroundColor: \"\",\r\n                    },\r\n                    \"<0.8\"\r\n                );\r\n        }\r\n    },\r\n    // 重置start动画样式\r\n    reset() {\r\n        gsap.timeline()\r\n            .set(this.container, {\r\n                scale: 1,\r\n            })\r\n            .set(this.inputbox, {\r\n                clipPath: \"circle(0%)\",\r\n            })\r\n            .set(this.background, {\r\n                opacity: 0,\r\n            })\r\n            .set(this.usetip, {\r\n                transform: \"translateY(-50%)\",\r\n                opacity: 0,\r\n            })\r\n            .set(this.closebtn, {\r\n                transform: \"translateY(50%)\",\r\n                opacity: 0,\r\n            });\r\n    },\r\n    // 显示start\r\n    show() {\r\n        // 动画播放器存在且正在播放动画：不执行函数，否则会因为动画冲突导致BUG\r\n        if (this.animater && this.animater.isActive()) return;\r\n        this.reset(); //重置\r\n        this.if_visible.value = true; // 显示start\r\n        // 播放动画\r\n        this.animater = gsap\r\n            .timeline()\r\n            .to(this.inputbox, {\r\n                clipPath: \"circle(100%)\",\r\n                duration: 1.5,\r\n                ease: \"power3.out\",\r\n            })\r\n            .to(\r\n                this.background,\r\n                {\r\n                    opacity: 1,\r\n                    duration: 1,\r\n                    ease: \"power3.out\",\r\n                },\r\n                \"<\"\r\n            )\r\n            .to(\r\n                [this.usetip, this.closebtn],\r\n                {\r\n                    transform: \"translateY(0%)\",\r\n                    opacity: 1,\r\n                    duration: 1,\r\n                    ease: \"power3.out\",\r\n                },\r\n                \"<\"\r\n            );\r\n    },\r\n    // 隐藏start\r\n    hidden(immediate, next) {\r\n        // 动画播放器存在且正在播放动画：不执行函数，否则会因为动画冲突导致BUG\r\n        if (this.animater && this.animater.isActive()) return;\r\n        if (immediate) immediate(); //存在立即执行代码，则立即执行\r\n        // 播放动画\r\n        this.animater = gsap.to(this.container, {\r\n            scale: 0,\r\n            duration: 0.8,\r\n            ease: \"power3.inOut\",\r\n            onComplete: () => {\r\n                this.input_text.value = \"\"; //清空输入框\r\n                this.if_visible.value = false; // 隐藏start\r\n                if (next) next(); //存在后续代码，则执行\r\n            },\r\n        });\r\n    },\r\n};\r\n// 储存全局功能函数\r\nstore.show_start = start.show.bind(start);\r\nstore.hidden_start = start.hidden.bind(start);\r\nonMounted(() => {\r\n    start.init();\r\n});\r\n</script>\r\n\r\n<style scoped>\r\n.start {\r\n    --scale: 1;\r\n    justify-content: center;\r\n    align-items: center;\r\n}\r\n.start_background {\r\n    position: absolute;\r\n    justify-content: center;\r\n    align-items: center;\r\n}\r\n\r\n.start_background_line {\r\n    position: absolute;\r\n    width: calc(var(--scale) * 50rem);\r\n    overflow: visible;\r\n    animation: start_background_line 2s var(--ease_out) infinite;\r\n}\r\n.start_background .start_background_line:nth-child(2) {\r\n    animation-delay: 1s;\r\n}\r\n@keyframes start_background_line {\r\n    0% {\r\n        transform: scale(1) rotate(0);\r\n    }\r\n    50% {\r\n        transform: scale(1.3) rotate(45deg);\r\n    }\r\n    100% {\r\n        transform: scale(1) rotate(0);\r\n    }\r\n}\r\n.start_background_line circle {\r\n    stroke: var(--color_front);\r\n    stroke-dasharray: 0 calc(var(--scale) * 1rem);\r\n}\r\n.start_background_ball {\r\n    position: absolute;\r\n    background-color: var(--color_front);\r\n    filter: blur(calc(var(--scale) * 0.8rem));\r\n}\r\n.start_inner {\r\n    flex-direction: column;\r\n    position: absolute;\r\n    justify-content: center;\r\n    align-items: center;\r\n    width: calc(var(--scale) * 55rem);\r\n    height: calc(var(--scale) * 55rem);\r\n}\r\n.start_usetip {\r\n    position: absolute;\r\n    top: var(--margin_ball_y);\r\n    color: var(--color_back);\r\n    transition: color 0.5s var(--ease_out);\r\n    cursor: pointer;\r\n}\r\n@media (hover: hover) {\r\n    .start_usetip:hover {\r\n        color: var(--color_gray);\r\n    }\r\n}\r\n.start_inputbox {\r\n    position: relative;\r\n    justify-content: center;\r\n    align-items: center;\r\n    width: 100%;\r\n}\r\n.start_inputbox_input {\r\n    position: absolute;\r\n    text-align: center;\r\n    width: 80%;\r\n    color: var(--color_back);\r\n    background-color: #0000;\r\n    outline: none;\r\n    border: none;\r\n}\r\n.start_inputbox_background {\r\n    position: absolute;\r\n    width: 100%;\r\n    height: calc(var(--scale) * 15rem);\r\n    mask-image: linear-gradient(0deg, #000, #0000 30%, #0000 70%, #000);\r\n    pointer-events: none;\r\n}\r\n.start_inputbox_background_balls {\r\n    position: absolute;\r\n    justify-content: end;\r\n    align-items: center;\r\n    width: 100%;\r\n    height: 100%;\r\n    overflow: hidden;\r\n    mask-image: linear-gradient(90deg, #0000, #000000 30%, #000000 70%, #0000);\r\n    opacity: 0.3;\r\n    transition: opacity 0.5s var(--ease_out);\r\n}\r\n.start_inputbox_background_balls > div {\r\n    animation: start_inputbox_background_balls 2s linear infinite;\r\n}\r\n.start_inputbox_background_balls > div div {\r\n    width: calc(var(--scale) * 14rem);\r\n    height: calc(var(--scale) * 14rem);\r\n    border-radius: 100%;\r\n    border: calc(var(--scale) * 0.1rem) var(--color_back) solid;\r\n    margin-right: calc(var(--scale) * -10rem);\r\n}\r\n@media (hover: hover) {\r\n    .start_inputbox:hover .start_inputbox_background_balls {\r\n        opacity: 1;\r\n    }\r\n}\r\n@keyframes start_inputbox_background_balls {\r\n    0% {\r\n        transform: translateX();\r\n    }\r\n    100% {\r\n        transform: translateX(100%);\r\n    }\r\n}\r\n.start_startbtn {\r\n    position: absolute;\r\n    color: var(--color_gray);\r\n    transform: translateY(400%);\r\n    transition: color 0.5s var(--ease_out);\r\n    cursor: pointer;\r\n}\r\n.start_startbtn span {\r\n    color: var(--color_back);\r\n}\r\n@media (hover: hover) {\r\n    .start_startbtn:hover {\r\n        color: var(--color_back);\r\n    }\r\n}\r\n.start_closebtn {\r\n    position: absolute;\r\n    bottom: var(--margin_ball_y);\r\n}\r\n</style>","import script from \"./start.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./start.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./start.vue?vue&type=style&index=0&id=b23717aa&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-b23717aa\"]])\n\nexport default __exports__","<template>\r\n    <svg\r\n        version=\"1.1\"\r\n        id=\"图层_1\"\r\n        xmlns=\"http://www.w3.org/2000/svg\"\r\n        xmlns:xlink=\"http://www.w3.org/1999/xlink\"\r\n        x=\"0px\"\r\n        y=\"0px\"\r\n        viewBox=\"0 0 1280 720\"\r\n        style=\"enable-background:new 0 0 1280 720;\"\r\n        xml:space=\"preserve\"\r\n    >\r\n        <circle class=\"st0\" cx=\"437.2\" cy=\"360\" r=\"107.2\" />\r\n        <g>\r\n            <g id=\"snakeball_00000154412184457504243440000000722208250675200952_\">\r\n                <g>\r\n                    <defs>\r\n                        <circle id=\"SVGID_1_\" cx=\"784.9\" cy=\"521.8\" r=\"120.6\" />\r\n                    </defs>\r\n                    <clipPath id=\"SVGID_00000070805632074724540150000016972647168016195519_\">\r\n                        <use xlink:href=\"#SVGID_1_\" style=\"overflow:visible;\" />\r\n                    </clipPath>\r\n\r\n                    <g\r\n                        id=\"snakeball_00000077302939392205197550000004415577628854971785_\"\r\n                        style=\"clip-path:url(#SVGID_00000070805632074724540150000016972647168016195519_);\"\r\n                    >\r\n                        <g>\r\n                            <circle class=\"st2\" cx=\"761.6\" cy=\"579.1\" r=\"14\" />\r\n                            <circle class=\"st2\" cx=\"764.6\" cy=\"538.7\" r=\"14\" />\r\n                            <circle class=\"st2\" cx=\"777.2\" cy=\"501.7\" r=\"14\" />\r\n                            <circle class=\"st2\" cx=\"798.2\" cy=\"470.1\" r=\"14\" />\r\n                            <circle class=\"st2\" cx=\"826.6\" cy=\"446\" r=\"14\" />\r\n                            <circle class=\"st2\" cx=\"860.5\" cy=\"431.5\" r=\"14\" />\r\n                            <circle class=\"st2\" cx=\"896.9\" cy=\"427.2\" r=\"14\" />\r\n                            <circle class=\"st2\" cx=\"934\" cy=\"432.9\" r=\"14\" />\r\n                            <circle class=\"st2\" cx=\"969.4\" cy=\"448\" r=\"14\" />\r\n                            <circle class=\"st2\" cx=\"1001\" cy=\"472.3\" r=\"14\" />\r\n                            <circle class=\"st2\" cx=\"1026.7\" cy=\"505.4\" r=\"14\" />\r\n                        </g>\r\n                        <circle class=\"st2\" cx=\"770\" cy=\"638.1\" r=\"28\" />\r\n                    </g>\r\n                </g>\r\n            </g>\r\n            <circle class=\"st0\" cx=\"728.2\" cy=\"483.1\" r=\"20.9\" />\r\n            <circle class=\"st3\" cx=\"784.9\" cy=\"521.8\" r=\"120.6\" />\r\n            <polyline class=\"st4\" points=\"874.7,509.6 896.4,537.8 950,483.1 \t\" />\r\n        </g>\r\n        <g>\r\n            <g id=\"snakeball\">\r\n                <g>\r\n                    <defs>\r\n                        <circle id=\"SVGID_00000083079214301625512890000016108624706566726839_\" cx=\"784.9\" cy=\"198.2\" r=\"120.6\" />\r\n                    </defs>\r\n                    <clipPath id=\"SVGID_00000141429504130584813250000010003285123128318867_\">\r\n                        <use xlink:href=\"#SVGID_00000083079214301625512890000016108624706566726839_\" style=\"overflow:visible;\" />\r\n                    </clipPath>\r\n\r\n                    <g\r\n                        id=\"snakeball_00000088813371456040501580000004925738466730304133_\"\r\n                        style=\"clip-path:url(#SVGID_00000141429504130584813250000010003285123128318867_);\"\r\n                    >\r\n                        <g>\r\n                            <circle class=\"st2\" cx=\"833.5\" cy=\"225.6\" r=\"14\" />\r\n                            <circle class=\"st2\" cx=\"864.6\" cy=\"251.7\" r=\"14\" />\r\n                            <circle class=\"st2\" cx=\"887.3\" cy=\"283.5\" r=\"14\" />\r\n                            <circle class=\"st2\" cx=\"900.6\" cy=\"319\" r=\"14\" />\r\n                            <circle class=\"st2\" cx=\"903.6\" cy=\"356.1\" r=\"14\" />\r\n                            <circle class=\"st2\" cx=\"895.7\" cy=\"392.1\" r=\"14\" />\r\n                            <circle class=\"st2\" cx=\"877.8\" cy=\"424.2\" r=\"14\" />\r\n                            <circle class=\"st2\" cx=\"851.6\" cy=\"451\" r=\"14\" />\r\n                            <circle class=\"st2\" cx=\"818.7\" cy=\"470.9\" r=\"14\" />\r\n                            <circle class=\"st2\" cx=\"780.5\" cy=\"482.4\" r=\"14\" />\r\n                            <circle class=\"st2\" cx=\"738.6\" cy=\"484\" r=\"14\" />\r\n                        </g>\r\n                        <circle class=\"st2\" cx=\"780.7\" cy=\"198.1\" r=\"28\" />\r\n                    </g>\r\n                </g>\r\n            </g>\r\n            <circle class=\"st0\" cx=\"728.2\" cy=\"159.6\" r=\"20.9\" />\r\n            <circle class=\"st3\" cx=\"784.9\" cy=\"198.2\" r=\"120.6\" />\r\n            <g>\r\n                <line class=\"st6\" x1=\"874.7\" y1=\"147.9\" x2=\"926.2\" y2=\"196.6\" />\r\n                <line class=\"st6\" x1=\"926.2\" y1=\"138.7\" x2=\"874.7\" y2=\"196.3\" />\r\n            </g>\r\n        </g>\r\n    </svg>\r\n</template>\r\n     \r\n<style scoped>\r\n.st0 {\r\n    fill: #dc1130;\r\n}\r\n.st1 {\r\n    clip-path: url(#SVGID_00000034071498579116674810000007284013514052828083_);\r\n}\r\n.st2 {\r\n    fill: var(--color_back);\r\n}\r\n.st3 {\r\n    fill: none;\r\n    stroke: #8b8b8b;\r\n    stroke-width: 9.6;\r\n    stroke-miterlimit: 10;\r\n}\r\n.st4 {\r\n    fill: none;\r\n    stroke: #0ee515;\r\n    stroke-width: 27.7335;\r\n    stroke-linecap: round;\r\n    stroke-linejoin: round;\r\n    stroke-miterlimit: 10;\r\n}\r\n.st5 {\r\n    clip-path: url(#SVGID_00000017497026632941657420000006194532905443697319_);\r\n}\r\n.st6 {\r\n    fill: none;\r\n    stroke: #dc1130;\r\n    stroke-width: 22.177;\r\n    stroke-linecap: round;\r\n    stroke-linejoin: round;\r\n    stroke-miterlimit: 10;\r\n}\r\n</style>\r\n","import { render } from \"./i1.vue?vue&type=template&id=9618ec26&scoped=true\"\nconst script = {}\n\nimport \"./i1.vue?vue&type=style&index=0&id=9618ec26&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-9618ec26\"]])\n\nexport default __exports__","<template>\r\n    <svg\r\n        version=\"1.1\"\r\n        id=\"图层_1\"\r\n        xmlns=\"http://www.w3.org/2000/svg\"\r\n        xmlns:xlink=\"http://www.w3.org/1999/xlink\"\r\n        x=\"0px\"\r\n        y=\"0px\"\r\n        viewBox=\"0 0 1280 720\"\r\n        style=\"enable-background:new 0 0 1280 720;\"\r\n        xml:space=\"preserve\"\r\n    >\r\n        <circle class=\"st0\" cx=\"437.4\" cy=\"360.5\" r=\"107.4\" />\r\n        <g>\r\n            <g>\r\n                <g>\r\n                    <defs>\r\n                        <circle id=\"SVGID_1_\" cx=\"785.6\" cy=\"522.5\" r=\"120.7\" />\r\n                    </defs>\r\n                    <clipPath id=\"SVGID_00000142880698686978151010000002383354629714331794_\">\r\n                        <use xlink:href=\"#SVGID_1_\" style=\"overflow:visible;\" />\r\n                    </clipPath>\r\n\r\n                    <g\r\n                        id=\"snakeball_00000183244237079077272680000012433569039606155671_\"\r\n                        style=\"clip-path:url(#SVGID_00000142880698686978151010000002383354629714331794_);\"\r\n                    >\r\n                        <g>\r\n                            <circle class=\"st2\" cx=\"762.2\" cy=\"579.9\" r=\"14\" />\r\n                            <circle class=\"st2\" cx=\"765.2\" cy=\"539.4\" r=\"14\" />\r\n                            <circle class=\"st2\" cx=\"777.8\" cy=\"502.4\" r=\"14\" />\r\n                            <circle class=\"st2\" cx=\"798.9\" cy=\"470.8\" r=\"14\" />\r\n                            <circle class=\"st2\" cx=\"827.4\" cy=\"446.6\" r=\"14\" />\r\n                            <circle class=\"st2\" cx=\"861.3\" cy=\"432.1\" r=\"14\" />\r\n                            <circle class=\"st2\" cx=\"897.8\" cy=\"427.8\" r=\"14\" />\r\n                            <circle class=\"st2\" cx=\"934.9\" cy=\"433.5\" r=\"14\" />\r\n                            <circle class=\"st2\" cx=\"970.3\" cy=\"448.6\" r=\"14\" />\r\n                            <circle class=\"st2\" cx=\"1002\" cy=\"473\" r=\"14\" />\r\n\r\n                            <ellipse\r\n                                transform=\"matrix(0.3827 -0.9239 0.9239 0.3827 166.8653 1261.9316)\"\r\n                                class=\"st2\"\r\n                                cx=\"1027.7\"\r\n                                cy=\"506.1\"\r\n                                rx=\"14\"\r\n                                ry=\"14\"\r\n                            />\r\n                        </g>\r\n                        <circle class=\"st2\" cx=\"770.7\" cy=\"638.9\" r=\"28.1\" />\r\n                    </g>\r\n                </g>\r\n            </g>\r\n            <circle class=\"st0\" cx=\"728.8\" cy=\"483.8\" r=\"20.9\" />\r\n            <circle class=\"st3\" cx=\"785.6\" cy=\"522.5\" r=\"120.7\" />\r\n            <polyline class=\"st4\" points=\"875.5,510.3 897.2,538.5 951,483.8 \t\" />\r\n        </g>\r\n        <g>\r\n            <g>\r\n                <g>\r\n                    <defs>\r\n                        <circle id=\"SVGID_00000033369951689911397510000007795032026328788875_\" cx=\"785.6\" cy=\"198.5\" r=\"120.7\" />\r\n                    </defs>\r\n                    <clipPath id=\"SVGID_00000181047955654480907650000012951851439733309103_\">\r\n                        <use xlink:href=\"#SVGID_00000033369951689911397510000007795032026328788875_\" style=\"overflow:visible;\" />\r\n                    </clipPath>\r\n\r\n                    <g\r\n                        id=\"snakeball_00000084490555774066418310000013876581186648035490_\"\r\n                        style=\"clip-path:url(#SVGID_00000181047955654480907650000012951851439733309103_);\"\r\n                    >\r\n                        <g>\r\n                            <circle class=\"st2\" cx=\"834.2\" cy=\"225.9\" r=\"14\" />\r\n                            <circle class=\"st2\" cx=\"865.4\" cy=\"252\" r=\"14\" />\r\n                            <circle class=\"st2\" cx=\"888.1\" cy=\"283.9\" r=\"14\" />\r\n                            <circle class=\"st2\" cx=\"901.5\" cy=\"319.4\" r=\"14\" />\r\n                            <circle class=\"st2\" cx=\"904.5\" cy=\"356.6\" r=\"14\" />\r\n                            <circle class=\"st2\" cx=\"896.5\" cy=\"392.6\" r=\"14\" />\r\n                            <circle class=\"st2\" cx=\"878.6\" cy=\"424.8\" r=\"14\" />\r\n                            <circle class=\"st2\" cx=\"852.4\" cy=\"451.6\" r=\"14\" />\r\n                            <circle class=\"st2\" cx=\"819.4\" cy=\"471.5\" r=\"14\" />\r\n                            <circle class=\"st2\" cx=\"781.2\" cy=\"483.1\" r=\"14\" />\r\n                            <circle class=\"st2\" cx=\"739.2\" cy=\"484.6\" r=\"14\" />\r\n                        </g>\r\n                        <circle class=\"st2\" cx=\"781.4\" cy=\"198.4\" r=\"28.1\" />\r\n                    </g>\r\n                </g>\r\n            </g>\r\n            <circle class=\"st0\" cx=\"728.8\" cy=\"159.8\" r=\"20.9\" />\r\n            <circle class=\"st3\" cx=\"785.6\" cy=\"198.5\" r=\"120.7\" />\r\n            <polyline class=\"st4\" points=\"875.5,167 897.2,195.3 951,140.6 \t\" />\r\n        </g>\r\n    </svg>\r\n</template>\r\n     \r\n<style scoped>\r\n.st0 {\r\n    fill: #0ee515;\r\n}\r\n.st1 {\r\n    clip-path: url(#SVGID_00000063631783964227010730000015106823497281639861_);\r\n}\r\n.st2 {\r\n    fill: var(--color_back);\r\n}\r\n.st3 {\r\n    fill: none;\r\n    stroke: #8b8b8b;\r\n    stroke-width: 9.6132;\r\n    stroke-miterlimit: 10;\r\n}\r\n.st4 {\r\n    fill: none;\r\n    stroke: #0ee515;\r\n    stroke-width: 27.7716;\r\n    stroke-linecap: round;\r\n    stroke-linejoin: round;\r\n    stroke-miterlimit: 10;\r\n}\r\n.st5 {\r\n    clip-path: url(#SVGID_00000042718032091895121320000011522057016050304155_);\r\n}\r\n</style>\r\n","import { render } from \"./i2.vue?vue&type=template&id=254bd1aa&scoped=true\"\nconst script = {}\n\nimport \"./i2.vue?vue&type=style&index=0&id=254bd1aa&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-254bd1aa\"]])\n\nexport default __exports__","<template>\r\n    <svg\r\n        version=\"1.1\"\r\n        id=\"图层_1\"\r\n        xmlns=\"http://www.w3.org/2000/svg\"\r\n        xmlns:xlink=\"http://www.w3.org/1999/xlink\"\r\n        x=\"0px\"\r\n        y=\"0px\"\r\n        viewBox=\"0 0 1280 720\"\r\n        style=\"enable-background:new 0 0 1280 720;\"\r\n        xml:space=\"preserve\"\r\n    >\r\n        <g>\r\n            <circle class=\"st0\" cx=\"421.7\" cy=\"254.9\" r=\"24.6\" />\r\n            <circle class=\"st1\" cx=\"346\" cy=\"288.3\" r=\"24.6\" />\r\n            <circle class=\"st2\" cx=\"317.5\" cy=\"362.6\" r=\"24.6\" />\r\n            <circle class=\"st3\" cx=\"348.7\" cy=\"435.4\" r=\"24.6\" />\r\n            <circle class=\"st4\" cx=\"421.7\" cy=\"466.1\" r=\"24.6\" />\r\n\r\n            <ellipse transform=\"matrix(0.1602 -0.9871 0.9871 0.1602 -15.2402 856.4873)\" class=\"st5\" cx=\"495.7\" cy=\"437.2\" rx=\"24.6\" ry=\"24.6\" />\r\n            <circle class=\"st6\" cx=\"528.7\" cy=\"365.4\" r=\"24.6\" />\r\n\r\n            <ellipse transform=\"matrix(0.1602 -0.9871 0.9871 0.1602 135.2004 739.229)\" class=\"st7\" cx=\"502\" cy=\"290.2\" rx=\"24.6\" ry=\"24.6\" />\r\n        </g>\r\n        <g>\r\n            <g>\r\n                <g>\r\n                    <defs>\r\n                        <circle id=\"SVGID_1_\" cx=\"785.6\" cy=\"522.5\" r=\"120.7\" />\r\n                    </defs>\r\n                    <clipPath id=\"SVGID_00000058578560589131419540000005683672373153448069_\">\r\n                        <use xlink:href=\"#SVGID_1_\" style=\"overflow:visible;\" />\r\n                    </clipPath>\r\n\r\n                    <g\r\n                        id=\"snakeball_00000036213562261964741630000001917426128620088723_\"\r\n                        style=\"clip-path:url(#SVGID_00000058578560589131419540000005683672373153448069_);\"\r\n                    >\r\n                        <g>\r\n                            <circle class=\"st9\" cx=\"762.2\" cy=\"579.9\" r=\"14\" />\r\n                            <circle class=\"st9\" cx=\"765.2\" cy=\"539.4\" r=\"14\" />\r\n                            <circle class=\"st9\" cx=\"777.8\" cy=\"502.4\" r=\"14\" />\r\n                            <circle class=\"st9\" cx=\"798.9\" cy=\"470.8\" r=\"14\" />\r\n                            <circle class=\"st9\" cx=\"827.4\" cy=\"446.6\" r=\"14\" />\r\n                            <circle class=\"st9\" cx=\"861.3\" cy=\"432.1\" r=\"14\" />\r\n                            <circle class=\"st9\" cx=\"897.8\" cy=\"427.8\" r=\"14\" />\r\n                            <circle class=\"st9\" cx=\"934.9\" cy=\"433.5\" r=\"14\" />\r\n                            <circle class=\"st9\" cx=\"970.3\" cy=\"448.6\" r=\"14\" />\r\n                            <circle class=\"st9\" cx=\"1002\" cy=\"473\" r=\"14\" />\r\n\r\n                            <ellipse\r\n                                transform=\"matrix(0.3827 -0.9239 0.9239 0.3827 166.8653 1261.9316)\"\r\n                                class=\"st9\"\r\n                                cx=\"1027.7\"\r\n                                cy=\"506.1\"\r\n                                rx=\"14\"\r\n                                ry=\"14\"\r\n                            />\r\n                        </g>\r\n                        <circle class=\"st9\" cx=\"770.7\" cy=\"638.9\" r=\"28.1\" />\r\n                    </g>\r\n                </g>\r\n            </g>\r\n            <circle class=\"st0\" cx=\"728.8\" cy=\"483.8\" r=\"20.9\" />\r\n            <circle class=\"st10\" cx=\"785.6\" cy=\"522.5\" r=\"120.7\" />\r\n            <g>\r\n                <line class=\"st11\" x1=\"880.6\" y1=\"484.9\" x2=\"932.1\" y2=\"533.7\" />\r\n                <line class=\"st11\" x1=\"932.1\" y1=\"475.7\" x2=\"880.6\" y2=\"533.3\" />\r\n            </g>\r\n        </g>\r\n        <g>\r\n            <g>\r\n                <g>\r\n                    <defs>\r\n                        <circle id=\"SVGID_00000169519945166522389740000014819755588883336080_\" cx=\"785.6\" cy=\"198.5\" r=\"120.7\" />\r\n                    </defs>\r\n                    <clipPath id=\"SVGID_00000142890141186374965730000005667215483105903517_\">\r\n                        <use xlink:href=\"#SVGID_00000169519945166522389740000014819755588883336080_\" style=\"overflow:visible;\" />\r\n                    </clipPath>\r\n\r\n                    <g\r\n                        id=\"snakeball_00000114777893864724983840000005972650244647262131_\"\r\n                        style=\"clip-path:url(#SVGID_00000142890141186374965730000005667215483105903517_);\"\r\n                    >\r\n                        <g>\r\n                            <circle class=\"st9\" cx=\"834.2\" cy=\"225.9\" r=\"14\" />\r\n                            <circle class=\"st9\" cx=\"865.4\" cy=\"252\" r=\"14\" />\r\n                            <circle class=\"st9\" cx=\"888.1\" cy=\"283.9\" r=\"14\" />\r\n                            <circle class=\"st9\" cx=\"901.5\" cy=\"319.4\" r=\"14\" />\r\n                            <circle class=\"st9\" cx=\"904.5\" cy=\"356.6\" r=\"14\" />\r\n                            <circle class=\"st9\" cx=\"896.5\" cy=\"392.6\" r=\"14\" />\r\n                            <circle class=\"st9\" cx=\"878.6\" cy=\"424.8\" r=\"14\" />\r\n                            <circle class=\"st9\" cx=\"852.4\" cy=\"451.6\" r=\"14\" />\r\n                            <circle class=\"st9\" cx=\"819.4\" cy=\"471.5\" r=\"14\" />\r\n                            <circle class=\"st9\" cx=\"781.2\" cy=\"483.1\" r=\"14\" />\r\n                            <circle class=\"st9\" cx=\"739.2\" cy=\"484.6\" r=\"14\" />\r\n                        </g>\r\n                        <circle class=\"st9\" cx=\"781.4\" cy=\"198.4\" r=\"28.1\" />\r\n                    </g>\r\n                </g>\r\n            </g>\r\n            <circle class=\"st0\" cx=\"728.8\" cy=\"159.8\" r=\"20.9\" />\r\n            <circle class=\"st10\" cx=\"785.6\" cy=\"198.5\" r=\"120.7\" />\r\n            <polyline class=\"st13\" points=\"875.5,167 897.2,195.3 951,140.6 \t\" />\r\n        </g>\r\n    </svg>\r\n</template>\r\n     \r\n<style scoped>\r\n.st0 {\r\n    fill: #16b7df;\r\n}\r\n.st1 {\r\n    fill: #046312;\r\n}\r\n.st2 {\r\n    fill: #ea4fc0;\r\n}\r\n.st3 {\r\n    fill: #808080;\r\n}\r\n.st4 {\r\n    fill: #9f4df0;\r\n}\r\n.st5 {\r\n    fill: #113ede;\r\n}\r\n.st6 {\r\n    fill: #ef7706;\r\n}\r\n.st7 {\r\n    fill: #a37e22;\r\n}\r\n.st8 {\r\n    clip-path: url(#SVGID_00000034087687760519555850000010805112038566615951_);\r\n}\r\n.st9 {\r\n   fill: var(--color_back);\r\n}\r\n.st10 {\r\n    fill: none;\r\n    stroke: #8b8b8b;\r\n    stroke-width: 9.6132;\r\n    stroke-miterlimit: 10;\r\n}\r\n.st11 {\r\n    fill: none;\r\n    stroke: #dc1130;\r\n    stroke-width: 22.2075;\r\n    stroke-linecap: round;\r\n    stroke-linejoin: round;\r\n    stroke-miterlimit: 10;\r\n}\r\n.st12 {\r\n    clip-path: url(#SVGID_00000059301448227048254720000010677512276462998203_);\r\n}\r\n.st13 {\r\n    fill: none;\r\n    stroke: #0ee515;\r\n    stroke-width: 27.7716;\r\n    stroke-linecap: round;\r\n    stroke-linejoin: round;\r\n    stroke-miterlimit: 10;\r\n}\r\n</style>\r\n","import { render } from \"./i3.vue?vue&type=template&id=545e8c03&scoped=true\"\nconst script = {}\n\nimport \"./i3.vue?vue&type=style&index=0&id=545e8c03&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-545e8c03\"]])\n\nexport default __exports__","<template>\r\n    <svg\r\n        version=\"1.1\"\r\n        id=\"图层_1\"\r\n        xmlns=\"http://www.w3.org/2000/svg\"\r\n        xmlns:xlink=\"http://www.w3.org/1999/xlink\"\r\n        x=\"0px\"\r\n        y=\"0px\"\r\n        viewBox=\"0 0 1280 720\"\r\n        style=\"enable-background:new 0 0 1280 720;\"\r\n        xml:space=\"preserve\"\r\n    >\r\n        <g id=\"snakeball_00000146460346963740185890000008938139895927930510_\">\r\n            <g>\r\n                <circle class=\"st0\" cx=\"333.8\" cy=\"251.9\" r=\"14\" />\r\n                <circle class=\"st0\" cx=\"364.9\" cy=\"278\" r=\"14\" />\r\n                <circle class=\"st0\" cx=\"387.6\" cy=\"309.9\" r=\"14\" />\r\n                <circle class=\"st0\" cx=\"401\" cy=\"345.4\" r=\"14\" />\r\n                <circle class=\"st0\" cx=\"404\" cy=\"382.6\" r=\"14\" />\r\n                <circle class=\"st0\" cx=\"396\" cy=\"418.6\" r=\"14\" />\r\n                <circle class=\"st0\" cx=\"378.2\" cy=\"450.8\" r=\"14\" />\r\n                <circle class=\"st0\" cx=\"352\" cy=\"477.6\" r=\"14\" />\r\n                <circle class=\"st0\" cx=\"319\" cy=\"497.5\" r=\"14\" />\r\n                <circle class=\"st0\" cx=\"280.7\" cy=\"509.1\" r=\"14\" />\r\n                <circle class=\"st0\" cx=\"238.8\" cy=\"510.6\" r=\"14\" />\r\n            </g>\r\n\r\n            <ellipse transform=\"matrix(0.1602 -0.9871 0.9871 0.1602 14.4108 465.7378)\" class=\"st0\" cx=\"280.9\" cy=\"224.4\" rx=\"28.1\" ry=\"28.1\" />\r\n        </g>\r\n        <g>\r\n            <g>\r\n                <circle class=\"st0\" cx=\"919.1\" cy=\"452.8\" r=\"14\" />\r\n                <circle class=\"st0\" cx=\"872.4\" cy=\"401.8\" r=\"14\" />\r\n                <circle class=\"st0\" cx=\"841.1\" cy=\"325.1\" r=\"14\" />\r\n                <circle class=\"st0\" cx=\"887.5\" cy=\"278\" r=\"14\" />\r\n                <circle class=\"st0\" cx=\"962.2\" cy=\"298.2\" r=\"14\" />\r\n                <circle class=\"st0\" cx=\"1038.9\" cy=\"332.8\" r=\"14\" />\r\n                <circle class=\"st0\" cx=\"1123\" cy=\"334.7\" r=\"14\" />\r\n                <circle class=\"st0\" cx=\"1143.4\" cy=\"266.9\" r=\"14\" />\r\n                <circle class=\"st0\" cx=\"1113.9\" cy=\"186.5\" r=\"14\" />\r\n            </g>\r\n            <circle class=\"st0\" cx=\"966.5\" cy=\"520.5\" r=\"28.1\" />\r\n        </g>\r\n        <g>\r\n            <polyline class=\"st1\" points=\"570.8,430.8 710.2,430.8 671.3,401.2 \t\" />\r\n            <g>\r\n                <circle class=\"st2\" cx=\"640.5\" cy=\"333.5\" r=\"43.4\" />\r\n                <path\r\n                    class=\"st3\"\r\n                    d=\"M653.2,345h-14.5c-2.8,0-5.1-2.3-5.1-5.1v-23.7c0-2.8,2.3-5.1,5.1-5.1s5.1,2.3,5.1,5.1v18.6h9.3\r\n\t\t\tc2.8,0,5.1,2.3,5.1,5.1S656,345,653.2,345z\"\r\n                />\r\n            </g>\r\n        </g>\r\n    </svg>\r\n</template>\r\n     \r\n<style scoped>\r\n.st0 {\r\n    fill: var(--color_back);\r\n}\r\n.st1 {\r\n    fill: none;\r\n    stroke: #8b8b8b;\r\n    stroke-width: 14.5705;\r\n    stroke-miterlimit: 10;\r\n}\r\n.st2 {\r\n    fill: none;\r\n    stroke: #8b8b8b;\r\n    stroke-width: 8.3766;\r\n    stroke-miterlimit: 10;\r\n}\r\n.st3 {\r\n    fill: #8b8b8b;\r\n}\r\n</style>\r\n","import { render } from \"./i4.vue?vue&type=template&id=4b7cde36&scoped=true\"\nconst script = {}\n\nimport \"./i4.vue?vue&type=style&index=0&id=4b7cde36&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-4b7cde36\"]])\n\nexport default __exports__","<template>\r\n    <div class=\"instrution _fullscreen\" v-show=\"instrution.if_visible.value\">\r\n        <svg viewBox=\"0 0 50 50\" class=\"instrution_circle\">\r\n            <circle class=\"_dashed\" cx=\"25\" cy=\"25\" r=\"25\" vector-effect=\"non-scaling-stroke\" />\r\n        </svg>\r\n        <svg viewBox=\"0 0 50 2\" class=\"instrution_line\">\r\n            <line class=\"_dashed\" x1=\"0\" y1=\"1\" x2=\"50\" y2=\"1\" vector-effect=\"non-scaling-stroke\" />\r\n        </svg>\r\n        <svg viewBox=\"0 0 50 2\" class=\"instrution_line instrution_line_vertical\">\r\n            <line class=\"_dashed\" x1=\"0\" y1=\"1\" x2=\"50\" y2=\"1\" vector-effect=\"non-scaling-stroke\" />\r\n        </svg>\r\n        <div class=\"instrution_ball _middle_ball\"></div>\r\n        <div class=\"instrution_images\">\r\n            <div style=\"--l:0%;--t:0%\">\r\n                <I1 />\r\n            </div>\r\n            <div style=\"--r:0%;--t:0%\">\r\n                <I2 />\r\n            </div>\r\n            <div style=\"--l:0%;--b:0%\">\r\n                <I3 />\r\n            </div>\r\n            <div style=\"--r:0%;--b:0%\">\r\n                <I4 />\r\n            </div>\r\n        </div>\r\n        <div class=\"instrution_closebtn\" @click=\"instrution.hidden\">\r\n            <Closebtn :if_reverse=\"true\" />\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { global } from \"@/stores/global\";\r\nimport I1 from \"@/components/instrutions/i1.vue\";\r\nimport I2 from \"@/components/instrutions/i2.vue\";\r\nimport I3 from \"@/components/instrutions/i3.vue\";\r\nimport I4 from \"@/components/instrutions/i4.vue\";\r\nimport Closebtn from \"@/components/ui/closebtn.vue\";\r\nimport { onMounted, ref } from \"vue\";\r\nimport gsap from \"gsap\";\r\nconst store = global();\r\n// instrution控制对象\r\nconst instrution = {\r\n    // DOM元素\r\n    container: null,\r\n    circle: null,\r\n    lines: null,\r\n    images: null,\r\n    //动画播放器\r\n    animater: null,\r\n    if_visible: ref(false), //instrution是否可见\r\n    init() {\r\n        this.container = document.querySelector(\".instrution\");\r\n        this.circle = document.querySelector(\".instrution_circle\");\r\n        this.lines = document.querySelectorAll(\".instrution_line\");\r\n        this.images = document.querySelectorAll(\".instrution_images div\");\r\n    },\r\n    // 重置instrution动画样式\r\n    reset() {\r\n        gsap.timeline()\r\n            .set(this.container, {\r\n                clipPath: \"polygon(0% 0%, 0% 0%, 0% 100%, 0% 100%)\",\r\n            })\r\n            .set(this.circle, {\r\n                scale: 0,\r\n            })\r\n            .set(this.lines, {\r\n                clipPath: \"polygon(50% 0%, 50% 0%, 50% 100%, 50% 100%)\",\r\n            })\r\n            .set(this.images, {\r\n                clipPath: \"circle(0%)\",\r\n                x: \"-20%\",\r\n            });\r\n    },\r\n    // 显示instrution\r\n    show(immediate) {\r\n        // 动画播放器存在且正在播放动画：不执行函数，否则会因为动画冲突导致BUG\r\n        if (this.animater && this.animater.isActive()) return;\r\n        if (immediate) immediate(); //存在立即执行代码，则立即执行\r\n        this.reset(); //重置\r\n        this.if_visible.value = true; //显示instrution\r\n        // 播放动画\r\n        this.animater = gsap\r\n            .timeline()\r\n            .to(this.container, {\r\n                clipPath: \"polygon(0% 0%, 100% 0%, 100% 100%, 0% 100%)\",\r\n                duration: 1,\r\n                ease: \"power3.inOut\",\r\n            })\r\n            .to(\r\n                this.circle,\r\n                {\r\n                    scale: 1,\r\n                    duration: 1.5,\r\n                    ease: \"power3.out\",\r\n                },\r\n                \"<0.5\"\r\n            )\r\n            .to(\r\n                this.lines,\r\n                {\r\n                    clipPath: \"polygon(0% 0%, 100% 0%, 100% 100%, 0% 100%)\",\r\n                    duration: 1.5,\r\n                    ease: \"power3.out\",\r\n                },\r\n                \"<\"\r\n            )\r\n            .to(\r\n                this.images,\r\n                {\r\n                    clipPath: \"circle(100%)\",\r\n                    x: 0,\r\n                    duration: 1.5,\r\n                    ease: \"power3.out\",\r\n                    stagger: 0.05,\r\n                },\r\n                \"<0.4\"\r\n            );\r\n    },\r\n    // 隐藏instrution\r\n    hidden() {\r\n        // 动画播放器存在且正在播放动画：不执行函数，否则会因为动画冲突导致BUG\r\n        if (this.animater && this.animater.isActive()) return;\r\n        // 播放动画\r\n        this.animater = gsap.to(this.container, {\r\n            clipPath: \"polygon(100% 0%, 100% 0%, 100% 100%, 100% 100%)\",\r\n            duration: 1,\r\n            ease: \"power3.inOut\",\r\n            onComplete: () => {\r\n                this.if_visible.value = false; // 隐藏instrution\r\n            },\r\n        });\r\n    },\r\n};\r\n// 储存全局功能函数\r\nstore.show_instrution = () => {\r\n    // 这里将按钮音效播放放在show函数内部，是为了避免多次点击而多次播放音效的BUG\r\n    instrution.show(() => {\r\n        store.audio_controller.button.play();\r\n    });\r\n};\r\nonMounted(() => {\r\n    instrution.init();\r\n});\r\n</script>\r\n\r\n<style  scoped>\r\n.instrution {\r\n    --scale: 1;\r\n    justify-content: center;\r\n    align-items: center;\r\n    background-color: var(--color_back);\r\n    z-index: 1000;\r\n}\r\n.instrution_circle {\r\n    position: absolute;\r\n    width: calc(var(--scale) * 85rem);\r\n    height: calc(var(--scale) * 85rem);\r\n    stroke: var(--color_front);\r\n    stroke-dasharray: 0 calc(var(--scale) * 1rem);\r\n    overflow: visible;\r\n}\r\n.instrution_line {\r\n    position: absolute;\r\n    width: 100vmax;\r\n    stroke: var(--color_front);\r\n    stroke-dasharray: 0 calc(var(--scale) * 1rem);\r\n    overflow: visible;\r\n}\r\n.instrution_line_vertical {\r\n    transform: rotate(90deg);\r\n}\r\n.instrution_ball {\r\n    position: absolute;\r\n    background-color: var(--color_back);\r\n    border: calc(var(--scale) * 0.3rem) solid var(--color_front);\r\n    background-image: linear-gradient(0deg, transparent 1.9rem, var(--color_front) 2rem),\r\n        linear-gradient(90deg, transparent 1.9rem, var(--color_front) 2rem);\r\n    background-size: 2rem 2rem;\r\n}\r\n.instrution_images {\r\n    position: absolute;\r\n    width: calc(var(--scale) * 110rem);\r\n    height: calc(var(--scale) * 65rem);\r\n}\r\n.instrution_images div {\r\n    position: absolute;\r\n    justify-content: center;\r\n    align-items: center;\r\n    left: var(--l);\r\n    top: var(--t);\r\n    right: var(--r);\r\n    bottom: var(--b);\r\n    width: calc(var(--scale) * 3.2rem * 16);\r\n    height: calc(var(--scale) * 3.2rem * 9);\r\n    background-color: var(--color_front);\r\n    cursor: pointer;\r\n    overflow: hidden;\r\n}\r\n.instrution_images div svg {\r\n    position: relative;\r\n    width: 100%;\r\n    transform: scale(1.1);\r\n    transition: transform 1s var(--ease_out);\r\n}\r\n@media (hover: hover) {\r\n    .instrution_images div:hover svg {\r\n        transform: scale(1);\r\n    }\r\n}\r\n.instrution_closebtn {\r\n    position: absolute;\r\n}\r\n@media screen and (max-aspect-ratio: 0.7/1) {\r\n    .instrution_images {\r\n        flex-direction: column;\r\n        align-items: center;\r\n        width: auto;\r\n        height: auto;\r\n    }\r\n    .instrution_images div {\r\n        position: relative;\r\n        left: auto;\r\n        top: auto;\r\n        right: auto;\r\n        bottom: auto;\r\n        margin: calc(var(--scale) * 5rem) 0;\r\n    }\r\n}\r\n@media screen and (max-aspect-ratio: 0.6/1) {\r\n    .instrution_images div {\r\n        width: calc(var(--scale) * 4rem * 16);\r\n        height: calc(var(--scale) * 4rem * 9);\r\n    }\r\n}\r\n</style>","import script from \"./instrution.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./instrution.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./instrution.vue?vue&type=style&index=0&id=6a2b1696&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-6a2b1696\"]])\n\nexport default __exports__","<template>\r\n    <div class=\"rank _fullscreen\" :class=\"{'_hidden':!rank.if_visible.value}\">\r\n        <div class=\"rank_middle _middle_ball\">\r\n            <div class=\"rank_middle_data\">\r\n                <p class=\"_font_2\">RANK</p>\r\n                <p class=\"_font_2\">{{players_data.length?players_data[rank.current_index.value].rank:'loading'}}</p>\r\n            </div>\r\n            <div class=\"rank_middle_data\">\r\n                <p class=\"_font_2\">SCORE</p>\r\n                <p class=\"_font_2\">{{players_data.length?players_data[rank.current_index.value].score:'loading'}}</p>\r\n            </div>\r\n            <div class=\"rank_middle_data\">\r\n                <p class=\"_font_2\">LIVES</p>\r\n                <p class=\"_font_2\">{{players_data.length?players_data[rank.current_index.value].lives:'loading'}}</p>\r\n            </div>\r\n            <div class=\"rank_middle_data\">\r\n                <p class=\"_font_2\">WAVE</p>\r\n                <p class=\"_font_2\">{{players_data.length?players_data[rank.current_index.value].wave:'loading'}}</p>\r\n            </div>\r\n            <div class=\"rank_middle_closebtn\" @click=\"rank.hidden\">\r\n                <Closebtn />\r\n            </div>\r\n        </div>\r\n        <div\r\n            class=\"rank_playerball\"\r\n            v-for=\"index in 15\"\r\n            :key=\"index\"\r\n            :class=\"{'rank_playerball_selected':index==rank.current_index.value+1}\"\r\n            :style=\"{'--r': (15 - 1-index) * 0.8 / 20+1}\"\r\n            @click=\" rank.current_index.value = index-1\"\r\n        >\r\n            <p class=\"rank_playerball_rank _font_5\">{{players_data[index-1]?(players_data[index-1].rank > 99?'99+':players_data[index-1].rank):'?'}}</p>\r\n            <p class=\"rank_playerball_name _font_1\">{{players_data[index-1]?players_data[index-1].name:'loading'}}</p>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { global } from \"@/stores/global\";\r\nimport Closebtn from \"@/components/ui/closebtn.vue\";\r\nimport { onMounted, ref } from \"vue\";\r\nimport gsap from \"gsap\";\r\nimport { Engine, Bodies, Composite, Events, Body, Mouse, MouseConstraint } from \"matter-js\";\r\nconst store = global();\r\nconst player = store.player;\r\n// 进行排名展示的玩家数据\r\nconst players_data = ref([]);\r\n// rank控制对象\r\nconst rank = {\r\n    // DOM元素\r\n    container: null,\r\n    balls: null,\r\n    middle: null,\r\n    // matter配置项\r\n    engine: null, //引擎\r\n    world: null, //物理世界\r\n    edges: null, //物理世界里面的所有边界墙\r\n    if_run_engine: false, //是否运行引擎\r\n    //当前被选中展示的玩家index\r\n    current_index: ref(0),\r\n    animater: null, //动画播放器\r\n    if_visible: ref(false), //rank是否可见\r\n    init() {\r\n        this.create_engine();\r\n        this.container = document.querySelector(\".rank\");\r\n        this.balls = [...document.querySelectorAll(\".rank_playerball\")];\r\n        this.middle = document.querySelector(\".rank_middle\");\r\n        window.addEventListener(\"resize\", this.resize.bind(this));\r\n        // 创建中间球体的物理模型\r\n        this.create_bady(this.middle, true);\r\n    },\r\n    // 创建物理引擎\r\n    create_engine() {\r\n        this.engine = Engine.create({\r\n            constraintIterations: 1,\r\n        });\r\n        this.world = this.engine.world;\r\n    },\r\n    // 尺寸改变，重新生成所有物理模型以适配新的尺寸\r\n    resize() {\r\n        // 移除，并重新生成中间球体\r\n        Composite.remove(this.world, this.middle.body, false);\r\n        this.create_bady(this.middle, true);\r\n        //如果没有运行引擎的话，边界和小球是空的，不执行后续内容\r\n        if (!this.if_run_engine) return;\r\n        // 移除，并重新生成边界\r\n        Composite.remove(this.world, this.edges, false);\r\n        this.create_edges();\r\n        // 重新为所有小球绑定物理模型模拟\r\n        this.balls.forEach((ball) => {\r\n            Composite.remove(this.world, ball.body, false); //移除小球的物理模型\r\n            this.create_bady(ball); // 重新生成\r\n        });\r\n    },\r\n    // 创建边界墙\r\n    create_edges() {\r\n        this.edges = [];\r\n        // 获取视口宽高\r\n        const view_width = innerWidth;\r\n        const view_height = innerHeight;\r\n        // 创建视口边界 (下左右)：这里不设置顶部，因为小球会从顶部掉落进来\r\n        this.edges = [\r\n            Bodies.rectangle(view_width / 2, view_height + 5, view_width, 10, {\r\n                isStatic: true,\r\n            }), // 底部\r\n            Bodies.rectangle(-5, view_height / 2, 10, view_height, { isStatic: true }), // 左侧\r\n            Bodies.rectangle(view_width + 5, view_height / 2, 10, view_height, {\r\n                isStatic: true,\r\n            }), // 右侧\r\n        ];\r\n        // 将边界加入到物理世界\r\n        Composite.add(this.world, this.edges);\r\n    },\r\n    // 初始化所有小球\r\n    init_balls() {\r\n        this.balls.forEach((ball, index) => {\r\n            // 所有小球按序号从下往上，从左往右依次排列\r\n            let row = parseInt(index % 4);\r\n            let line = parseInt(index / 4);\r\n            ball.style.left = `${25 * row}%`;\r\n            ball.style.top = `${25 * line}%`;\r\n            // 生成小球的物理模型\r\n            this.create_bady(ball);\r\n        });\r\n    },\r\n    // 生成DOM元素的物理模型body\r\n    create_bady(ele, if_static = false) {\r\n        const rect = ele.getBoundingClientRect();\r\n        const body = Bodies.circle(\r\n            rect.left + rect.width / 2, //x位置\r\n            rect.top + rect.width / 2, //y位置\r\n            rect.width / 2, //半径\r\n            { isStatic: if_static } //球体是否静止:是否可以与其他模型发生碰撞\r\n        );\r\n        //将body和元素绑定，方便直接通过元素控制body\r\n        ele.body = body;\r\n        Composite.add(this.world, body); // 将body加入到物理世界\r\n    },\r\n    // 运行引擎\r\n    run_engine() {\r\n        // 引擎不能自动开关：所以用if_run_engine手动控制引擎开关\r\n        if (!this.if_run_engine) return;\r\n        Engine.update(this.engine); //更新引擎\r\n        // 将body物理模型的物理状态设置到DOM元素上\r\n        this.balls.forEach((ball) => {\r\n            // 小球小于一定速度则停止移动：停止设置transform，释放性能\r\n            if (ball.body.speed <= 0.2) return;\r\n            gsap.set(ball, {\r\n                left: `${ball.body.position.x - ball.offsetWidth / 2}px`,\r\n                top: `${ball.body.position.y - ball.offsetHeight / 2}px`,\r\n                rotate: `${ball.body.angle}deg`,\r\n            });\r\n        });\r\n        requestAnimationFrame(() => {\r\n            this.run_engine();\r\n        });\r\n    },\r\n    // 重置物理引擎和动画样式\r\n    reset() {\r\n        this.world.gravity.y = 1.5; //恢复物理世界重力\r\n        // 重新创建边界墙和所有小球的物理模型\r\n        this.create_edges();\r\n        this.init_balls();\r\n        // 运行引擎\r\n        this.if_run_engine = true;\r\n        this.run_engine();\r\n        gsap.set(this.container, {\r\n            clipPath: \"polygon(0% 0%, 100% 0%, 100% 0%, 0% 0%)\",\r\n        });\r\n    },\r\n    // 显示rank\r\n    show(immediate) {\r\n        // 动画播放器存在且正在播放动画：不执行函数，否则会因为动画冲突导致BUG\r\n        if (this.animater && this.animater.isActive()) return;\r\n        if (immediate) immediate(); //存在立即执行代码，则立即执行\r\n        this.get_rank_list();\r\n        this.reset(); //重置\r\n        this.if_visible.value = true; //显示rank\r\n        // 播放动画\r\n        this.animater = gsap.to(this.container, {\r\n            clipPath: \"polygon(0% 0%, 100% 0%, 100% 100%, 0% 100%)\",\r\n            duration: 1,\r\n            ease: \"power3.inOut\",\r\n        });\r\n    },\r\n    // 隐藏rank\r\n    hidden() {\r\n        // 动画播放器存在且正在播放动画：不执行函数，否则会因为动画冲突导致BUG\r\n        if (this.animater && this.animater.isActive()) return;\r\n        //  移除底部边界，并加大重力，让所有小球掉下\r\n        Composite.remove(this.engine.world, this.edges, false);\r\n        this.world.gravity.y = innerHeight / 250; //根据屏幕高度设置重力，避免小球掉落太快或者太慢\r\n        // 播放动画\r\n        this.animater = gsap.to(this.container, {\r\n            clipPath: \"polygon(0% 100%, 100% 100%, 100% 100%, 0% 100%)\",\r\n            duration: 1,\r\n            ease: \"power3.inOut\",\r\n            onComplete: () => {\r\n                this.if_visible.value = false; //隐藏rank\r\n                this.if_run_engine = false; //停止引擎\r\n                // 移除所有小球的物理模型\r\n                this.balls.forEach((ball) => {\r\n                    Composite.remove(this.engine.world, ball.body, false);\r\n                });\r\n            },\r\n        });\r\n    },\r\n    // 获取所有玩家的排名名单\r\n    get_rank_list() {\r\n        // 更新默认显示的玩家index，默认选中第一名\r\n        this.current_index.value = 0;\r\n        (async () => {\r\n            const response = await fetch(\"https://put_your_server.com/api\");\r\n            players_data.value = await response.json();\r\n            // 为所有玩家添加排名参数\r\n            players_data.value.forEach((data, index) => {\r\n                data.rank = index + 1;\r\n            });\r\n            // 如果当前玩家的分数存在的话：查找其分数所对应的排名\r\n            if (player.score !== null) this.get_rank();\r\n        })();\r\n    },\r\n    // 获取玩家分数对应的排名\r\n    get_rank() {\r\n        let request = new XMLHttpRequest();\r\n        request.open(\"POST\", \"https://put_your_server.com/api\", true);\r\n        request.setRequestHeader(\"Content-type\", \"application/json\");\r\n        request.send(JSON.stringify({ score: player.score }));\r\n        request.onreadystatechange = () => {\r\n            if (request.status == 200 && request.readyState == 4) {\r\n                player.rank = JSON.parse(request.responseText).rank;\r\n                // 如果玩家在15名内：则默认选中玩家所对应的小球，优先显示玩家信息\r\n                if (player.rank <= 15) {\r\n                    this.current_index.value = player.rank - 1;\r\n                } else {\r\n                    // 如果玩家在15名外：则让最后一个小球显示玩家的对应信息\r\n                    players_data.value[players_data.value.length - 1] = {\r\n                        name: player.name,\r\n                        rank: player.rank,\r\n                        wave: player.wave,\r\n                        lives: player.lives,\r\n                        score: player.score,\r\n                    };\r\n                    // 同上，优先显示玩家信息\r\n                    this.current_index.value = players_data.value.length - 1;\r\n                }\r\n            }\r\n        };\r\n    },\r\n};\r\n// 储存全局功能函数\r\nstore.show_rank = () => {\r\n    // 这里将按钮音效播放放在show函数内部，是为了避免多次点击而多次播放音效的BUG\r\n    rank.show(() => {\r\n        store.audio_controller.button.play();\r\n    });\r\n};\r\nonMounted(() => {\r\n    rank.init();\r\n});\r\n</script>\r\n\r\n<style scoped>\r\n.rank {\r\n    --scale: 1;\r\n    justify-content: center;\r\n    align-items: center;\r\n    background-color: var(--color_back);\r\n    z-index: 1000;\r\n}\r\n.rank_middle {\r\n    flex-direction: column;\r\n    position: absolute;\r\n    align-items: center;\r\n}\r\n.rank_middle_data {\r\n    flex-direction: column;\r\n    align-items: center;\r\n    margin-top: calc(var(--scale) * 3rem);\r\n}\r\n.rank_middle .rank_middle_data:first-child {\r\n    margin-top: var(--margin_ball_y);\r\n}\r\n.rank_middle_data P:nth-child(1) {\r\n    color: var(--color_gray);\r\n}\r\n.rank_middle_data P:nth-child(2) {\r\n    color: var(--color_back);\r\n}\r\n.rank_middle_closebtn {\r\n    position: absolute;\r\n    bottom: var(--margin_ball_y);\r\n}\r\n.rank_playerball {\r\n    flex-direction: column;\r\n    position: absolute;\r\n    justify-content: center;\r\n    align-items: center;\r\n    width: calc(var(--scale) * 25rem * var(--r));\r\n    height: calc(var(--scale) * 25rem * var(--r));\r\n    border-radius: 50%;\r\n    background-color: var(--color_gray);\r\n    overflow: hidden;\r\n    transition: background-color 0.5s var(--ease_out);\r\n    cursor: pointer;\r\n}\r\n.rank_playerball p {\r\n    color: var(--color_back);\r\n    transition: color 0.5s var(--ease_out);\r\n}\r\n.rank_playerball_rank {\r\n    font-family: title;\r\n    line-height: calc(var(--scale) * 13rem);\r\n}\r\n\r\n@media (hover: hover) {\r\n    .rank_playerball:hover p {\r\n        color: var(--color_front);\r\n    }\r\n}\r\n.rank_playerball_selected {\r\n    background-color: var(--color_front);\r\n}\r\n@media (hover: hover) {\r\n    .rank_playerball_selected:hover p {\r\n        color: var(--color_back);\r\n    }\r\n}\r\n</style>","import script from \"./rank.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./rank.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./rank.vue?vue&type=style&index=0&id=744036f0&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-744036f0\"]])\n\nexport default __exports__","<template>\r\n    <div class=\"background _fullscreen\">\r\n        <!-- 这里的模糊小球用图片代替滤镜是为了适配safari浏览器，safari对于滤镜不太友好，大范围模糊容易卡顿 -->\r\n        <div style=\"--s:1.5;--x:-0.1;--y:-0.3;--o:1\">\r\n            <img :src=\"require('@/assets/images/blurball.png')\" alt=\"blurball\" />\r\n        </div>\r\n        <div style=\"--s:1.3;--x:-0.05;--y:0.75;--o:1\">\r\n            <img :src=\"require('@/assets/images/blurball.png')\" alt=\"blurball\" />\r\n        </div>\r\n        <div style=\"--s:0.9;--x:0.7;--y:0;--o:0.8\">\r\n            <img :src=\"require('@/assets/images/blurball.png')\" alt=\"blurball\" />\r\n        </div>\r\n        <div style=\"--s:0.4;--x:0.88;--y:0.45;--o:0.6\">\r\n            <img :src=\"require('@/assets/images/blurball.png')\" alt=\"blurball\" />\r\n        </div>\r\n        <div style=\"--s:0.5;--x:0.6;--y:0.85;--o:0.7\">\r\n            <img :src=\"require('@/assets/images/blurball.png')\" alt=\"blurball\" />\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { onMounted } from \"vue\";\r\nimport gsap from \"gsap\";\r\n// 背景控制对象\r\nconst background = {\r\n    balls: null, //所有的背景移动小球\r\n    mouse_x: 0, //坐标x\r\n    mouse_y: 0, //坐标y\r\n    distance_x: 0, //横向移动距离\r\n    distance_y: 0, //竖向移动距离\r\n    init() {\r\n        this.balls = document.querySelectorAll(\".background div\");\r\n        // 绑定监听事件\r\n        document.addEventListener(\"mousemove\", (e) => {\r\n            this.move_balls(e.x, e.y);\r\n        });\r\n        document.addEventListener(\"touchmove\", (e) => {\r\n            this.move_balls(e.touches[0].clientX, e.touches[0].clientY);\r\n        });\r\n        document.addEventListener(\"mouseleave\", (e) => {\r\n            this.reset_balls();\r\n        });\r\n        document.addEventListener(\"touchend\", (e) => {\r\n            this.reset_balls();\r\n        });\r\n    },\r\n    // 移动背景模糊小球\r\n    move_balls(x, y) {\r\n        // 防止大幅度抖动：例如在鼠标离开界面后再回来\r\n        if (Math.abs(x - this.mouse_x) >= innerWidth / 10) this.mouse_x = x;\r\n        if (Math.abs(y - this.mouse_y) >= innerHeight / 10) this.mouse_y = y;\r\n        // 更新距离:将距离与屏幕尺寸绑定：避免不同尺寸下移动距离差异过大\r\n        this.distance_x += ((x - this.mouse_x) / innerWidth) * 80;\r\n        this.distance_y += ((y - this.mouse_y) / innerHeight) * 80;\r\n        // 移动小球\r\n        gsap.to(this.balls, {\r\n            x: `${-this.distance_x}px`,\r\n            y: `${-this.distance_y}px`,\r\n            duration: 3,\r\n            ease: \"power3.out\",\r\n        });\r\n        // 更新坐标\r\n        this.mouse_x = x;\r\n        this.mouse_y = y;\r\n    },\r\n    // 复位所有背景模糊小球\r\n    reset_balls() {\r\n        gsap.to(this.balls, {\r\n            x: 0,\r\n            y: 0,\r\n            duration: 5,\r\n            ease: \"power3.out\",\r\n        });\r\n        this.distance_x = this.distance_y = 0;\r\n    },\r\n};\r\nonMounted(() => {\r\n    background.init();\r\n});\r\n</script>\r\n\r\n<style scoped>\r\n.background {\r\n    --scale: 1;\r\n    pointer-events: none;\r\n}\r\n.background div {\r\n    position: absolute;\r\n    left: calc(100% * var(--x));\r\n    top: calc(100% * var(--y));\r\n    width: calc(var(--scale) * 50rem * var(--s));\r\n    height: calc(var(--scale) * 50rem * var(--s));\r\n    opacity: var(--o);\r\n}\r\n/* 黑暗模式下，小球亮了点，这里再减去一点透明度 */\r\n._darkmode .background div {\r\n    opacity: calc(var(--o) - 0.4);\r\n}\r\n.background div img {\r\n    position: relative;\r\n    width: 120%;\r\n    height: 120%;\r\n}\r\n</style>","import script from \"./background.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./background.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./background.vue?vue&type=style&index=0&id=3d50fc1a&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-3d50fc1a\"]])\n\nexport default __exports__","<template>\r\n    <div class=\"links\" ref=\"links\">\r\n        <a href=\"https://github.com/JIEJOE-Visual/snakeball\" target=\"_blank\">\r\n            <svg viewBox=\"0 0 24 24\">\r\n                <path\r\n                    d=\"M12.5.75C6.146.75 1 5.896 1 12.25c0 5.089 3.292 9.387 7.863 10.91.575.101.79-.244.79-.546 \r\n                    0-.273-.014-1.178-.014-2.142-2.889.532-3.636-.704-3.866-1.35-.13-.331-.69-1.352-1.18-1.625-.402-.216-.977-.748-.014-.762.906-.014 \r\n                    1.553.834 1.769 1.179 1.035 1.74 2.688 1.25 3.349.948.1-.747.402-1.25.733-1.538-2.559-.287-5.232-1.279-5.232-5.678 \r\n                    0-1.25.445-2.285 1.178-3.09-.115-.288-.517-1.467.115-3.048 0 0 .963-.302 3.163 1.179.92-.259 1.897-.388 2.875-.388.977 \r\n                    0 1.955.13 2.875.388 2.2-1.495 3.162-1.179 3.162-1.179.633 1.581.23 2.76.115 3.048.733.805 1.179 1.825 1.179 3.09 0 \r\n                    4.413-2.688 5.39-5.247 5.678.417.36.776 1.05.776 2.128 0 1.538-.014 2.774-.014 3.162 0 .302.216.662.79.547C20.709 \r\n                    21.637 24 17.324 24 12.25 24 5.896 18.854.75 12.5.75Z\"\r\n                />\r\n            </svg>\r\n        </a>\r\n        <a href=\"https://space.bilibili.com/3546390319860710\" target=\"_blank\">\r\n            <svg viewBox=\"0 0 18 18\">\r\n                <path\r\n                    d=\"M3.73252 2.67094C3.33229 2.28484 3.33229 1.64373 3.73252 1.25764C4.11291 0.890684 4.71552 0.890684 5.09591 \r\n                    1.25764L7.21723 3.30403C7.27749 3.36218 7.32869 3.4261 7.37081 3.49407H10.5789C10.6211 3.4261 10.6723 3.36218 \r\n                    10.7325 3.30403L12.8538 1.25764C13.2342 0.890684 13.8368 0.890684 14.2172 1.25764C14.6175 1.64373 14.6175 \r\n                    2.28484 14.2172 2.67094L13.364 3.49407H14C16.2091 3.49407 18 5.28493 18 7.49407V12.9996C18 15.2087 16.2091 \r\n                    16.9996 14 16.9996H4C1.79086 16.9996 0 15.2087 0 12.9996V7.49406C0 5.28492 1.79086 3.49407 4 3.49407H4.58579L3.73252 \r\n                    2.67094ZM4 5.42343C2.89543 5.42343 2 6.31886 2 7.42343V13.0702C2 14.1748 2.89543 15.0702 4 15.0702H14C15.1046 \r\n                    15.0702 16 14.1748 16 13.0702V7.42343C16 6.31886 15.1046 5.42343 14 5.42343H4ZM5 9.31747C5 8.76519 5.44772 \r\n                    8.31747 6 8.31747C6.55228 8.31747 7 8.76519 7 9.31747V10.2115C7 10.7638 6.55228 11.2115 6 11.2115C5.44772 \r\n                    11.2115 5 10.7638 5 10.2115V9.31747ZM12 8.31747C11.4477 8.31747 11 8.76519 11 9.31747V10.2115C11 10.7638 \r\n                    11.4477 11.2115 12 11.2115C12.5523 11.2115 13 10.7638 13 10.2115V9.31747C13 8.76519 12.5523 8.31747 12 8.31747Z\"\r\n                />\r\n            </svg>\r\n        </a>\r\n    </div>\r\n    <div class=\"nav\">\r\n        <div class=\"nav_soundbtn\" :class=\"{'nav_soundbtn_mute':if_mute}\" @click=\"switch_mutemode\">\r\n            <p class=\"nav_soundbtn_tip _font_1\">SOUND</p>\r\n            <div class=\"nav_soundbtn_wave\">\r\n                <div style=\"--s:1;--d:1\"></div>\r\n                <div style=\"--s:1.5;--d:2\"></div>\r\n                <div style=\"--s:2;--d:3\"></div>\r\n            </div>\r\n        </div>\r\n        <svg\r\n            class=\"nav_colorbtn\"\r\n            :class=\"{'nav_colorbtn_light':current_colormode==='light','nav_colorbtn_dark':current_colormode==='dark'}\"\r\n            viewBox=\"0 0 500 500\"\r\n            @click=\"switch_colormode\"\r\n        >\r\n            <path\r\n                class=\"nav_colorbtn_moon\"\r\n                d=\"M143.03,250c0,64.73,31.22,122.16,79.41,158.06v0.05c-87.33,0-158.12-70.79-158.12-158.12\r\n\t\tS135.12,91.88,222.44,91.88v0.05C174.25,127.84,143.03,185.27,143.03,250z\"\r\n            />\r\n            <path class=\"nav_colorbtn_sun\" d=\"M396.79,250c0,87.33-70.79,158.12-158.12,158.12V91.88C326,91.88,396.79,162.67,396.79,250z\" />\r\n            <path class=\"nav_colorbtn_sunline\" d=\"M238.67,53c108.8,0,197,88.2,197,197s-88.2,197-197,197\" />\r\n        </svg>\r\n    </div>\r\n    <a class=\"copyright _font_1\" href=\"https://www.jiejoe.com\" target=\"_blank\" ref=\"copyright\">\r\n        @2025.4.1\r\n        <br />MAKE BY JIEJOE\r\n    </a>\r\n</template>\r\n\r\n<script setup>\r\nimport { global } from \"@/stores/global\";\r\nimport { ref } from \"vue\";\r\nimport gsap from \"gsap\";\r\nimport { Howler } from \"howler\";\r\nconst store = global();\r\n//当前的颜色模式：默认为light\r\nconst current_colormode = ref(\"light\");\r\n// 切换页面颜色模式\r\nfunction switch_colormode() {\r\n    document.querySelector(\"html\").classList.toggle(\"_darkmode\");\r\n    current_colormode.value = current_colormode.value === \"light\" ? \"dark\" : \"light\";\r\n}\r\n//是否静音，默认为false\r\nlet if_mute = ref(false);\r\n// 切换页面静音状态\r\nfunction switch_mutemode() {\r\n    if_mute.value = !if_mute.value;\r\n    Howler.mute(if_mute.value);\r\n}\r\n// DOM元素\r\nconst links = ref(null);\r\nconst copyright = ref(null);\r\n// 显示菜单\r\nfunction show_menu() {\r\n    links.value.classList.remove(\"_hidden\");\r\n    copyright.value.classList.remove(\"_hidden\");\r\n}\r\n// 隐藏菜单\r\nfunction hidden_menu() {\r\n    links.value.classList.add(\"_hidden\");\r\n    copyright.value.classList.add(\"_hidden\");\r\n}\r\n// 储存全局功能函数\r\nstore.show_menu = show_menu;\r\nstore.hidden_menu = hidden_menu;\r\n</script>\r\n\r\n<style scoped>\r\n* {\r\n    --scale: 1;\r\n    z-index: 10000;\r\n}\r\n.links {\r\n    position: fixed;\r\n    left: var(--margin_x);\r\n    top: var(--margin_y);\r\n    transform: translateY(-50%);\r\n    transition: opacity 1s var(--ease_out), visibility 1s var(--ease_out);\r\n}\r\n.links svg {\r\n    height: calc(var(--scale) * 3rem);\r\n    fill: var(--color_front);\r\n    margin-right: calc(var(--scale) * 3rem);\r\n    overflow: visible;\r\n    transition: fill 0.5s var(--ease_out);\r\n    cursor: pointer;\r\n}\r\n@media (hover: hover) {\r\n    .links svg:hover {\r\n        fill: var(--color_gray);\r\n    }\r\n}\r\n.nav {\r\n    flex-direction: row-reverse;\r\n    position: fixed;\r\n    align-items: center;\r\n    right: var(--margin_x);\r\n    top: var(--margin_y);\r\n    transform: translateY(-50%);\r\n}\r\n.nav_soundbtn {\r\n    justify-content: center;\r\n    align-items: center;\r\n    background-color: var(--color_front);\r\n    border-radius: calc(var(--scale) * 2rem);\r\n    padding: calc(var(--scale) * 1rem) calc(var(--scale) * 1.5rem);\r\n    transition: background-color 0.5s var(--ease_out);\r\n    cursor: pointer;\r\n}\r\n.nav_soundbtn_tip {\r\n    color: var(--color_back);\r\n    line-height: calc(var(--scale) * 1.5rem);\r\n    margin-right: calc(var(--scale) * 0.6rem);\r\n}\r\n.nav_soundbtn_wave {\r\n    align-items: center;\r\n    height: calc(var(--scale) * 1.5rem);\r\n    overflow: hidden;\r\n    transition: height 0.5s var(--ease_out);\r\n}\r\n.nav_soundbtn_wave div {\r\n    width: calc(var(--scale) * 0.5rem * var(--s));\r\n    height: calc(var(--scale) * 0.5rem * var(--s));\r\n    background-color: var(--color_back);\r\n    border-radius: 100%;\r\n    margin: 0 calc(var(--scale) * 0.4rem);\r\n    animation: nav_soundbtn_wave 2s var(--ease_out) infinite calc(var(--d) * 0.2s);\r\n}\r\n@keyframes nav_soundbtn_wave {\r\n    0% {\r\n        transform: scale(1);\r\n    }\r\n    50% {\r\n        transform: scale(1.5);\r\n    }\r\n    100% {\r\n        transform: scale(1);\r\n    }\r\n}\r\n@media (hover: hover) {\r\n    .nav_soundbtn:hover {\r\n        background-color: var(--color_gray);\r\n    }\r\n}\r\n.nav_soundbtn_mute .nav_soundbtn_wave {\r\n    height: calc(var(--scale) * 0.25rem);\r\n}\r\n.nav_soundbtn_mute .nav_soundbtn_wave div {\r\n    animation-play-state: paused;\r\n}\r\n.nav_colorbtn {\r\n    width: calc(var(--scale) * 3.8rem);\r\n    height: calc(var(--scale) * 3.8rem);\r\n    margin-right: calc(var(--scale) * 3rem);\r\n    cursor: pointer;\r\n}\r\n.nav_colorbtn_moon,\r\n.nav_colorbtn_sun,\r\n.nav_colorbtn_sunline {\r\n    transition: fill 0.5s var(--ease_out), stroke 0.5s var(--ease_out);\r\n}\r\n.nav_colorbtn_moon {\r\n    fill: var(--color_front);\r\n}\r\n.nav_colorbtn_sun {\r\n    fill: var(--color_front);\r\n}\r\n.nav_colorbtn_sunline {\r\n    fill: none;\r\n    stroke: var(--color_front);\r\n    stroke-width: 25;\r\n    stroke-linecap: round;\r\n    stroke-linejoin: round;\r\n    stroke-dasharray: 0, 70;\r\n    animation: nav_colorbtn_sunline 0.1s linear infinite;\r\n}\r\n@keyframes nav_colorbtn_sunline {\r\n    0% {\r\n        stroke-dashoffset: 0;\r\n    }\r\n    100% {\r\n        stroke-dashoffset: -70;\r\n    }\r\n}\r\n.nav_colorbtn_light .nav_colorbtn_moon {\r\n    fill: var(--color_gray);\r\n}\r\n\r\n@media (hover: hover) {\r\n    .nav_colorbtn_light:hover .nav_colorbtn_moon {\r\n        fill: var(--color_front);\r\n    }\r\n}\r\n.nav_colorbtn_dark .nav_colorbtn_sun {\r\n    fill: var(--color_gray);\r\n}\r\n.nav_colorbtn_dark .nav_colorbtn_sunline {\r\n    stroke: var(--color_gray);\r\n}\r\n\r\n@media (hover: hover) {\r\n    .nav_colorbtn_dark:hover .nav_colorbtn_sun {\r\n        fill: var(--color_front);\r\n    }\r\n    .nav_colorbtn_dark:hover .nav_colorbtn_sunline {\r\n        stroke: var(--color_front);\r\n    }\r\n}\r\n\r\n.copyright {\r\n    position: fixed;\r\n    left: var(--margin_x);\r\n    bottom: var(--margin_y);\r\n    line-height: calc(var(--scale) * 2rem);\r\n    color: var(--color_front);\r\n    text-decoration: none;\r\n    transition: opacity 1s var(--ease_out), visibility 1s var(--ease_out),\r\n        color 0.5s var(--ease_out);\r\n    transform: translateY(50%);\r\n}\r\n@media (hover: hover) {\r\n    .copyright:hover {\r\n        color: var(--color_gray);\r\n    }\r\n}\r\n</style>","import script from \"./menu.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./menu.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./menu.vue?vue&type=style&index=0&id=5ca0b284&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-5ca0b284\"]])\n\nexport default __exports__","<template>\r\n    <div class=\"loading _fullscreen\" v-show=\"loading.if_visible.value\">\r\n        <svg viewBox=\"0 0 100 50\" class=\"loading_icon\">\r\n            <path\r\n                d=\"M50,25c0-12.14,9.84-21.99,21.99-21.99S93.98,12.86,93.98,25s-9.84,21.99-21.99,21.99S50,37.21,50,25.06\r\n        S40.16,3.01,28.01,3.01S6.02,12.86,6.02,25s9.84,21.99,21.99,21.99S50,37.14,50,25c0-8.14,4.42-15.24,10.99-19.05\r\n        C67.57,9.76,71.99,16.86,71.99,25c0,8.14-4.42,15.24-10.99,19.04c0,0,0,0,0,0c-3.23,1.87-6.99,2.94-10.99,2.94\r\n        c-4.01,0-7.76-1.07-10.99-2.94h0C32.43,40.24,28.01,33.14,28.01,25c0-8.14,4.42-15.24,10.99-19.05l0,0\r\n        C42.24,4.08,45.99,3.01,50,3.01s7.76,1.07,10.99,2.94l0,0\"\r\n            />\r\n            <path\r\n                d=\"M50,25c0-12.14,9.84-21.99,21.99-21.99S93.98,12.86,93.98,25s-9.84,21.99-21.99,21.99S50,37.21,50,25.06\r\n        S40.16,3.01,28.01,3.01S6.02,12.86,6.02,25s9.84,21.99,21.99,21.99S50,37.14,50,25c0-8.14,4.42-15.24,10.99-19.05\r\n        C67.57,9.76,71.99,16.86,71.99,25c0,8.14-4.42,15.24-10.99,19.04c0,0,0,0,0,0c-3.23,1.87-6.99,2.94-10.99,2.94\r\n        c-4.01,0-7.76-1.07-10.99-2.94h0C32.43,40.24,28.01,33.14,28.01,25c0-8.14,4.42-15.24,10.99-19.05l0,0\r\n        C42.24,4.08,45.99,3.01,50,3.01s7.76,1.07,10.99,2.94l0,0\"\r\n            />\r\n        </svg>\r\n        <div class=\"loading_mask\"></div>\r\n        <div class=\"loading_circle\"></div>\r\n        <p class=\"loading_tip _font_2\" @click=\"store.first_show\">START</p>\r\n    </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { global } from \"@/stores/global\";\r\nimport { onMounted, ref } from \"vue\";\r\nimport gsap from \"gsap\";\r\nconst store = global();\r\n// 加载效果控制模块\r\nconst loading = {\r\n    // DOM元素\r\n    icon: null,\r\n    paths: null,\r\n    tip: null,\r\n    circle: null,\r\n    mask: null,\r\n    // 动画播放器\r\n    animater: null,\r\n    if_visible: ref(true), //是否可见\r\n    init() {\r\n        this.icon = document.querySelector(\".loading_icon\");\r\n        this.paths = [...document.querySelectorAll(\".loading_icon path\")];\r\n        this.tip = document.querySelector(\".loading_tip\");\r\n        this.circle = document.querySelector(\".loading_circle\");\r\n        this.mask = document.querySelector(\".loading_mask\");\r\n        // loading初始动画：小蛇循环划8\r\n        this.animater = gsap.timeline().fromTo(\r\n            this.paths,\r\n            // 间隔开两端线条的描边偏移：使虚线线段呈现一个小蛇的样子\r\n            {\r\n                strokeDashoffset: (i) => {\r\n                    if (i === 0) return 0;\r\n                    else return 480;\r\n                },\r\n            },\r\n            {\r\n                strokeDashoffset: (i) => {\r\n                    if (i === 0) return -275;\r\n                    else return 205;\r\n                },\r\n                duration: 2,\r\n                ease: \"linear\",\r\n                onComplete: () => {\r\n                    // 每播放完一次，检查一下加载状态，加载完成则执行完成动画，反之继续循环播放等待加载\r\n                    if (document.readyState === \"complete\") this.finish();\r\n                    else this.animater.restart();\r\n                },\r\n            }\r\n        );\r\n    },\r\n    // 加载完成：小蛇变成一个球\r\n    finish() {\r\n        this.animater = gsap\r\n            .timeline()\r\n            // 动画的第一部分：蛇头缩放消失，蛇身虚线偏移成圆形，并汇聚成实线，整体缩小以适应一会儿出现的文字\r\n            .to(this.paths[1], {\r\n                strokeWidth: 0,\r\n                duration: 0.4,\r\n                ease: \"power3.out\",\r\n            })\r\n            .to(\r\n                this.paths[0],\r\n                {\r\n                    strokeDashoffset: -300,\r\n                    duration: 0.4,\r\n                    ease: \"power3.out\",\r\n                },\r\n                \"<\"\r\n            )\r\n            .to(\r\n                this.paths[0],\r\n                {\r\n                    strokeDasharray: \"138 0 0 0 0 0 0 0 0 500\",\r\n                    duration: 0.7,\r\n                    ease: \"power3.out\",\r\n                },\r\n                \"<\"\r\n            )\r\n            .to(\r\n                this.icon,\r\n                {\r\n                    scale: 0.6,\r\n                    duration: 0.7,\r\n                    ease: \"power3.out\",\r\n                },\r\n                \"<\"\r\n            )\r\n            // 动画的第二部分：提示文字显示\r\n            .to(\r\n                this.tip,\r\n                {\r\n                    clipPath: \"circle(100%)\",\r\n                    y: 0,\r\n                    duration: 0.7,\r\n                    ease: \"power3.out\",\r\n                },\r\n                \"<0.3\"\r\n            )\r\n            .to(\r\n                this.circle,\r\n                {\r\n                    opacity: 1,\r\n                    duration: 0.7,\r\n                    ease: \"power3.out\",\r\n                },\r\n                \"<\"\r\n            );\r\n    },\r\n    // 隐藏loading动画\r\n    hidden(immediate, next) {\r\n        // 动画播放器播放完后：才可以执行函数播放后续动画，否则会因为动画冲突导致BUG\r\n        if (this.animater.isActive()) return;\r\n        if (immediate) immediate(); //存在立即执行函数，则立即执行\r\n        // 隐藏loading\r\n        this.animater = gsap\r\n            .timeline()\r\n            .to(this.tip, {\r\n                cursor: \"auto\",\r\n                scale: 0,\r\n                duration: 1,\r\n                ease: \"power3.out\",\r\n            })\r\n            .to(\r\n                this.mask,\r\n                {\r\n                    scale: 1,\r\n                    duration: 2.5,\r\n                    ease: \"power3.out\",\r\n                    onComplete: () => {\r\n                        this.if_visible.value = false; // 动画完成后，隐藏loading\r\n                        if (next) next(); //如果有后续函数，则执行\r\n                    },\r\n                },\r\n                \"<\"\r\n            );\r\n    },\r\n};\r\n// 储存全局功能函数\r\nstore.hidden_loading = loading.hidden.bind(loading);\r\nonMounted(() => {\r\n    loading.init();\r\n});\r\n</script>\r\n\r\n<style scoped>\r\n.loading {\r\n    --scale: 1;\r\n    justify-content: center;\r\n    align-items: center;\r\n    background-color: var(--color_front);\r\n    mix-blend-mode: darken;\r\n    z-index: 10000000;\r\n}\r\n\r\n.loading_icon {\r\n    position: absolute;\r\n    width: calc(var(--scale) * 35rem);\r\n}\r\n\r\n.loading_icon path {\r\n    fill: none;\r\n    stroke: var(--color_back);\r\n    stroke-linecap: round;\r\n}\r\n\r\n.loading_icon path:nth-child(1) {\r\n    stroke-width: 2;\r\n    stroke-dasharray: 0 5 0 5 0 5 0 5 0 500;\r\n}\r\n\r\n.loading_icon path:nth-child(2) {\r\n    stroke-width: 4;\r\n    stroke-dasharray: 0 500 0 500;\r\n    stroke-dashoffset: 480;\r\n}\r\n.loading_mask {\r\n    position: absolute;\r\n    width: 145vmax;\r\n    height: 145vmax;\r\n    border-radius: 100%;\r\n    background-color: var(--color_back);\r\n    transform: scale(0);\r\n}\r\n.loading_circle {\r\n    position: absolute;\r\n    width: calc(var(--scale) * 9.5rem);\r\n    height: calc(var(--scale) * 9.5rem);\r\n    border-radius: 100%;\r\n    background-color: var(--color_back);\r\n    opacity: 0;\r\n}\r\n.loading_tip {\r\n    position: absolute;\r\n    color: var(--color_front);\r\n    transition: color 0.5s var(--ease_out);\r\n    cursor: pointer;\r\n    transform: translateY(50%);\r\n    clip-path: circle(0%);\r\n}\r\n@media (hover: hover) {\r\n    .loading_tip:hover {\r\n        color: var(--color_gray);\r\n    }\r\n}\r\n</style>","import script from \"./loading.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./loading.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./loading.vue?vue&type=style&index=0&id=17211ad6&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-17211ad6\"]])\n\nexport default __exports__","<template>\r\n    <div class=\"resettip _fullscreen\">\r\n        <div class=\"resettip_circle\"></div>\r\n        <div class=\"resettip_circle\"></div>\r\n        <div class=\"resettip_circle\"></div>\r\n    </div>\r\n</template>\r\n\r\n<script setup>\r\nimport gsap from \"gsap\";\r\nimport { onMounted } from \"vue\";\r\nlet circles; //所有的圆环DOM元素\r\n// 重置：短暂显示圆环，并消失\r\nfunction reset() {\r\n    gsap.fromTo(\r\n        circles,\r\n        {\r\n            scale: 0,\r\n            opacity: 1,\r\n        },\r\n        {\r\n            scale: 1,\r\n            opacity: 0,\r\n            duration: 1,\r\n            stagger: 0.1,\r\n            ease: \"power3.inOut\",\r\n        }\r\n    );\r\n}\r\n// 将重置函数提供给stage\r\ndefineExpose({ reset });\r\nonMounted(() => {\r\n    circles = document.querySelectorAll(\".resettip_circle\");\r\n});\r\n</script>\r\n\r\n<style scoped>\r\n.resettip {\r\n    --scale: 1;\r\n    justify-content: center;\r\n    align-items: center;\r\n    pointer-events: none;\r\n}\r\n.resettip_circle {\r\n    position: absolute;\r\n    width: 100vmax;\r\n    height: 100vmax;\r\n    border-radius: 50%;\r\n    border: calc(var(--scale) * 0.5rem) var(--color_front) solid;\r\n    transform: scale(0);\r\n}\r\n</style>","import script from \"./resettip.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./resettip.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./resettip.vue?vue&type=style&index=0&id=30cda132&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-30cda132\"]])\n\nexport default __exports__","<template>\r\n    <div class=\"readytips _fullscreen\">\r\n        <div class=\"readytips_wave readytips_textbox\">\r\n            <p class=\"_font_5\">\r\n                WAVE\r\n                <span class=\"_font_5\">{{player.wave}}</span>\r\n            </p>\r\n        </div>\r\n        <div class=\"readytips_ready readytips_textbox\">\r\n            <p class=\"_font_5\">\r\n                YOU\r\n                <span class=\"_font_5\">READY?</span>\r\n            </p>\r\n        </div>\r\n        <div class=\"readytips_start readytips_textbox\">\r\n            <p class=\"_font_5\">\r\n                <span class=\"_font_5\">BUMP</span> UP!!\r\n            </p>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { global } from \"@/stores/global\";\r\nimport { onMounted, defineExpose } from \"vue\";\r\nimport gsap from \"gsap\";\r\nconst player = global().player;\r\nlet tip_texts; //所有提示文字的DOM元素\r\n// 准备提示：显示准备信息\r\nfunction ready(immediate, next) {\r\n    if (immediate) immediate(); //存在立即执行代码，则立即执行\r\n    gsap.timeline()\r\n        // 复位所有提示文字\r\n        .set(tip_texts, {\r\n            y: \"100%\",\r\n        })\r\n        // 展示第一段提示文字,并隐藏\r\n        .to(tip_texts[0], {\r\n            y: \"0%\",\r\n            duration: 0.5,\r\n            ease: \"power3.out\",\r\n        })\r\n        .to(\r\n            tip_texts[0],\r\n            {\r\n                y: \"-100%\",\r\n                duration: 0.5,\r\n                ease: \"power3.out\",\r\n            },\r\n            \"+=0.5\" //让文字停留0.5秒多一点\r\n        )\r\n        // 展示第二段提示文字,并隐藏\r\n        .to(\r\n            tip_texts[1],\r\n            {\r\n                y: \"0%\",\r\n                duration: 0.5,\r\n                ease: \"power3.out\",\r\n            },\r\n            \"<\"\r\n        )\r\n        .to(\r\n            tip_texts[1],\r\n            {\r\n                y: \"-100%\",\r\n                duration: 0.5,\r\n                ease: \"power3.out\",\r\n            },\r\n            \"+=0.5\"\r\n        )\r\n        // 展示第三段提示文字,并隐藏\r\n        .to(\r\n            tip_texts[2],\r\n            {\r\n                y: \"0%\",\r\n                duration: 0.5,\r\n                ease: \"power3.out\",\r\n            },\r\n            \"<\"\r\n        )\r\n        .to(\r\n            tip_texts[2],\r\n            {\r\n                y: \"-100%\",\r\n                duration: 0.5,\r\n                ease: \"power3.out\",\r\n                // 这里如果设置为最后一段文字完全隐藏之后、才执行next的话，会有一段缓动带来的空白间隙\r\n                // 为了流畅度，所以设置为刚开始播放最后一部分动画的时候，就执行next\r\n                onStart: () => {\r\n                    if (next) next(); //存在后续代码，则执行\r\n                },\r\n            },\r\n            \"+=0.5\"\r\n        );\r\n}\r\n// 将准备函数提供给stage\r\ndefineExpose({ ready });\r\nonMounted(() => {\r\n    tip_texts = [...document.querySelectorAll(\".readytips_textbox p\")];\r\n});\r\n</script>\r\n\r\n<style scoped>\r\n.readytips {\r\n    --scale: 1;\r\n    position: absolute;\r\n    justify-content: center;\r\n    align-items: center;\r\n    pointer-events: none;\r\n}\r\n.readytips > div {\r\n    position: absolute;\r\n}\r\n.readytips P {\r\n    font-family: title;\r\n    color: var(--color_gray);\r\n    white-space: nowrap;\r\n    line-height: calc(var(--scale) * 10rem);\r\n    transform: translateY(100%);\r\n}\r\n.readytips span {\r\n    font-family: title;\r\n    color: var(--color_front);\r\n}\r\n.readytips_textbox {\r\n    overflow: hidden;\r\n}\r\n</style>","import script from \"./readytips.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./readytips.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./readytips.vue?vue&type=style&index=0&id=3f2a7222&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-3f2a7222\"]])\n\nexport default __exports__","<template>\r\n    <div class=\"summary _fullscreen\" v-show=\"summary.if_visible.value\">\r\n        <!-- safari浏览器对css的filter适配不友好，这里检测到如果是safari浏览器，则取消滤镜融球效果 -->\r\n        <div class=\"summary_background\" :class=\"{'summary_background_filter':!store.if_safari}\">\r\n            <div class=\"summary_background_ball _middle_ball\"></div>\r\n            <div class=\"summary_background_ballbox\" style=\"--s:1;--a:45;\">\r\n                <div class=\"summary_background_ball\"></div>\r\n            </div>\r\n            <div class=\"summary_background_ballbox\" style=\"--s:1.2;--a:60;\">\r\n                <div class=\"summary_background_ball\"></div>\r\n            </div>\r\n            <div class=\"summary_background_ballbox\" style=\"--s:1.5;--a:180;\">\r\n                <div class=\"summary_background_ball\"></div>\r\n            </div>\r\n            <div class=\"summary_background_ballbox\" style=\"--s:1.3;--a:315;\">\r\n                <div class=\"summary_background_ball\"></div>\r\n            </div>\r\n        </div>\r\n        <div class=\"summary_inner\">\r\n            <div class=\"summary_inner_result\">\r\n                <div class=\"summary_gray\">\r\n                    <p class=\"_font_6\">YOU</p>\r\n                </div>\r\n                <div>\r\n                    <p class=\"_font_6\">{{player.if_active?'LIVE!':'DEAD!'}}</p>\r\n                </div>\r\n            </div>\r\n            <div class=\"summary_inner_score\">\r\n                <div class=\"summary_gray\">\r\n                    <p class=\"_font_4\">SCORE</p>\r\n                </div>\r\n                <div>\r\n                    <p class=\"_font_4\">{{player.score}}</p>\r\n                </div>\r\n            </div>\r\n            <div class=\"summary_inner_selections\">\r\n                <div @click=\"store.summary_continue_game\">\r\n                    <p class=\"_font_4\">{{player.if_active?'CONTINUE':'TRY AGAIN'}}</p>\r\n                </div>\r\n                <div @click=\"store.show_rank\">\r\n                    <p class=\"_font_4\">RANK</p>\r\n                </div>\r\n                <div @click=\"store.summary_to_welcome\">\r\n                    <p class=\"_font_4\">HOME</p>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { global } from \"@/stores/global\";\r\nimport { onMounted, ref } from \"vue\";\r\nimport gsap from \"gsap\";\r\nconst store = global();\r\nconst player = store.player;\r\n// summary控制对象\r\nconst summary = {\r\n    // DOM元素\r\n    inner_texts: null,\r\n    balls: null,\r\n    animater: null, //动画播放器\r\n    if_visible: ref(false), //summary是否可见\r\n    init() {\r\n        this.inner_texts = [...document.querySelectorAll(\".summary_inner p\")];\r\n        this.balls = document.querySelectorAll(\".summary_background_ball\");\r\n    },\r\n    // 重置summary动画样式\r\n    reset() {\r\n        gsap.set(this.inner_texts, {\r\n            y: \"100%\",\r\n            visibility: \"hidden\", // 防止在出现前、按钮就可以被点击\r\n        });\r\n    },\r\n    // 显示summary\r\n    show() {\r\n        // 动画播放器存在且正在播放动画：不执行函数，否则会因为动画冲突导致BUG\r\n        if (this.animater && this.animater.isActive()) return;\r\n        this.reset(); //重置\r\n        this.if_visible.value = true; //显示summary\r\n        // 播放动画\r\n        this.animater = gsap\r\n            .timeline()\r\n            .to(this.balls, {\r\n                scale: 1,\r\n                duration: 1,\r\n                ease: \"power3.inOut\",\r\n                stagger: 0.1,\r\n            })\r\n            // 第一部分文字出现、并消失\r\n            .to(\r\n                [this.inner_texts[0], this.inner_texts[1]],\r\n                {\r\n                    y: \"0%\",\r\n                    visibility: \"visible\", // 按钮出现、可以被点击\r\n                    duration: 0.5,\r\n                    ease: \"power3.out\",\r\n                    stagger: 0.1,\r\n                },\r\n                \"<0.6\"\r\n            )\r\n            .to(\r\n                [this.inner_texts[0], this.inner_texts[1]],\r\n                {\r\n                    y: \"-100%\",\r\n                    duration: 0.5,\r\n                    ease: \"power3.out\",\r\n                    stagger: 0.1,\r\n                },\r\n                \"+=0.3\"\r\n            )\r\n            // 第二部分文字出现、并消失\r\n            .to(\r\n                [this.inner_texts[2], this.inner_texts[3]],\r\n                {\r\n                    y: \"0%\",\r\n                    visibility: \"visible\",\r\n                    duration: 0.5,\r\n                    ease: \"power3.out\",\r\n                    stagger: 0.1,\r\n                },\r\n                \"<0.4\"\r\n            )\r\n            .to(\r\n                [this.inner_texts[2], this.inner_texts[3]],\r\n                {\r\n                    y: \"-100%\",\r\n                    duration: 0.5,\r\n                    ease: \"power3.out\",\r\n                    stagger: 0.1,\r\n                },\r\n                \"+=0.3\"\r\n            )\r\n            // 第三部分文字出现\r\n            .to(\r\n                [this.inner_texts[4], this.inner_texts[5], this.inner_texts[6]],\r\n                {\r\n                    y: \"0%\",\r\n                    visibility: \"visible\",\r\n                    duration: 0.5,\r\n                    ease: \"power3.out\",\r\n                    stagger: 0.1,\r\n                },\r\n                \"<0.4\"\r\n            );\r\n    },\r\n    // 隐藏summary\r\n    hidden(immediate, next) {\r\n        // 动画播放器存在且正在播放动画：不执行函数，否则会因为动画冲突导致BUG\r\n        if (this.animater && this.animater.isActive()) return;\r\n        if (immediate) immediate(); //存在立即执行代码，则立即执行\r\n        // 播放动画\r\n        this.animater = gsap\r\n            .timeline()\r\n            .to(this.balls, {\r\n                scale: 0,\r\n                duration: 1,\r\n                ease: \"power3.out\",\r\n                onComplete: () => {\r\n                    this.if_visible.value = false; //隐藏summary\r\n                    if (next) next(); //如果有后续步骤则执行\r\n                },\r\n            })\r\n            .to(\r\n                [this.inner_texts[4], this.inner_texts[5], this.inner_texts[6]],\r\n                {\r\n                    y: \"-100%\",\r\n                    duration: 0.5,\r\n                    ease: \"power3.out\",\r\n                    stagger: 0.1,\r\n                },\r\n                \"<\"\r\n            );\r\n    },\r\n};\r\n// 储存全局功能函数\r\nstore.hidden_summary = summary.hidden.bind(summary);\r\n// 将show方法提供给stage，这里不和hidden方法一样储存到全局、是因为只有在stage里面才会调用show方法\r\ndefineExpose({ show: summary.show.bind(summary) });\r\nonMounted(() => {\r\n    summary.init();\r\n});\r\n</script>\r\n\r\n<style scoped>\r\n.summary {\r\n    --scale: 1;\r\n    justify-content: center;\r\n    align-items: center;\r\n}\r\n.summary_background {\r\n    position: absolute;\r\n    justify-content: center;\r\n    align-items: center;\r\n    width: calc(var(--scale) * 100rem);\r\n    height: calc(var(--scale) * 100rem);\r\n}\r\n.summary_background_ball {\r\n    transform: scale(0);\r\n}\r\n.summary_background_ballbox {\r\n    position: absolute;\r\n    width: calc(var(--scale) * 60rem);\r\n    height: calc(var(--scale) * 60rem);\r\n    animation: summary_background_ballbox calc(var(--s) * 5s) linear infinite;\r\n}\r\n@keyframes summary_background_ballbox {\r\n    0% {\r\n        transform: rotate(calc(var(--a) * 1deg));\r\n    }\r\n    100% {\r\n        transform: rotate(calc(var(--a) * 1deg + 360deg));\r\n    }\r\n}\r\n.summary_background_filter {\r\n    filter: contrast(1000%);\r\n    background-color: var(--color_back);\r\n    mix-blend-mode: var(--mix);\r\n}\r\n.summary_background_filter .summary_background_ballbox {\r\n    filter: blur(calc(var(--scale) * 3rem));\r\n}\r\n.summary_background_ballbox div {\r\n    position: absolute;\r\n    width: calc(var(--scale) * 8rem * var(--s));\r\n    height: calc(var(--scale) * 8rem * var(--s));\r\n    background-color: var(--color_front);\r\n    border-radius: 50%;\r\n}\r\n.summary_inner {\r\n    position: absolute;\r\n    justify-content: center;\r\n    align-items: center;\r\n}\r\n.summary_inner > div {\r\n    position: absolute;\r\n    flex-direction: column;\r\n    align-items: center;\r\n}\r\n.summary_inner > div div {\r\n    overflow: hidden;\r\n}\r\n.summary_inner p {\r\n    color: var(--color_back);\r\n    white-space: nowrap;\r\n}\r\n.summary_gray p {\r\n    color: var(--color_gray);\r\n}\r\n.summary_inner_result p {\r\n    font-family: title;\r\n    line-height: calc(var(--scale) * 17rem);\r\n}\r\n.summary_inner_result div:nth-child(1) {\r\n    margin-left: calc(var(--scale) * -30rem);\r\n}\r\n.summary_inner_result div:nth-child(2) {\r\n    margin-right: calc(var(--scale) * -18rem);\r\n    mix-blend-mode: exclusion;\r\n}\r\n.summary_inner_result div:nth-child(2) p {\r\n    color: var(--color_white);\r\n}\r\n.summary_inner_score div,\r\n.summary_inner_selections div {\r\n    margin-bottom: calc(var(--scale) * 4.5rem);\r\n}\r\n.summary_inner_score div:last-child,\r\n.summary_inner_selections div:last-child {\r\n    margin-bottom: 0;\r\n}\r\n.summary_inner_selections p {\r\n    cursor: pointer;\r\n    transition: color 0.5s var(--ease_out);\r\n}\r\n@media (hover: hover) {\r\n    .summary_inner_selections p:hover {\r\n        color: var(--color_gray);\r\n    }\r\n}\r\n</style>","import script from \"./summary.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./summary.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./summary.vue?vue&type=style&index=0&id=739102d4&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-739102d4\"]])\n\nexport default __exports__","<template>\r\n    <div class=\"databox _fullscreen _hidden\" ref=\"databox\">\r\n        <p class=\"wave _font_2\">\r\n            WAVE:\r\n            <span class=\"_font_2\">{{player.wave}}</span>\r\n        </p>\r\n        <p class=\"score _font_2\">\r\n            SCORE:\r\n            <span class=\"_font_2\">{{player.score}}</span>\r\n        </p>\r\n        <div class=\"info\">\r\n            <div class=\"info_lives\">\r\n                <svg class=\"info_lives_icon\" viewBox=\"0 0 655 500\">\r\n                    <circle cx=\"187.74\" cy=\"182.92\" r=\"167.7\" />\r\n                    <circle cx=\"466.86\" cy=\"182.92\" r=\"167.7\" />\r\n                    <circle cx=\"327.3\" cy=\"316.34\" r=\"167.7\" />\r\n                </svg>\r\n                <span class=\"_font_2\">{{player.lives}}</span>\r\n            </div>\r\n            <div class=\"info_time\">\r\n                <svg class=\"info_time_icon\" viewBox=\"0 0 350 500\">\r\n                    <path d=\"M11.66,483.55c0-90.13,73.07-163.2,163.2-163.2s163.2,73.07,163.2,163.2H11.66z\" />\r\n                    <path d=\"M338.06,16.2c0,90.13-73.07,163.2-163.2,163.2S11.66,106.33,11.66,16.2H338.06z\" />\r\n                    <circle cx=\"174.86\" cy=\"120\" r=\"39.78\" />\r\n                </svg>\r\n                <span class=\"_font_2\">{{player.time}}</span>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { global } from \"@/stores/global\";\r\nimport { ref } from \"vue\";\r\nconst store = global();\r\nconst player = store.player;\r\n// DOM元素\r\nconst databox = ref(null);\r\n// 显示数据信息\r\nfunction show_databox() {\r\n    databox.value.classList.remove(\"_hidden\");\r\n}\r\n// 显示数据信息\r\nfunction hidden_databox() {\r\n    databox.value.classList.add(\"_hidden\");\r\n}\r\n// 储存全局功能函数\r\nstore.show_databox = show_databox;\r\nstore.hidden_databox = hidden_databox;\r\n</script>\r\n\r\n<style scoped>\r\n.databox {\r\n    --scale: 1;\r\n    align-items: center;\r\n    justify-content: center;\r\n    z-index: 100000;\r\n    transition: opacity 1s var(--ease_out), visibility 1s var(--ease_out);\r\n    pointer-events: none;\r\n}\r\np {\r\n    color: var(--color_gray);\r\n}\r\nspan {\r\n    color: var(--color_front);\r\n}\r\n.wave {\r\n    position: fixed;\r\n    left: var(--margin_x);\r\n    top: var(--margin_y);\r\n    transform: translateY(-50%);\r\n}\r\n.score {\r\n    position: fixed;\r\n    left: var(--margin_x);\r\n    bottom: var(--margin_y);\r\n    transform: translateY(50%);\r\n}\r\n.info {\r\n    position: fixed;\r\n    top: var(--margin_y);\r\n    transform: translateY(-50%);\r\n}\r\n.info > div {\r\n    align-items: center;\r\n}\r\n.info svg {\r\n    height: calc(var(--scale) * 2.5rem);\r\n    margin-right: calc(var(--scale) * 1.5rem);\r\n}\r\n.info_lives {\r\n    margin-right: calc(var(--scale) * 4rem);\r\n}\r\n\r\n.info_lives_icon circle {\r\n    fill: #0ee515;\r\n}\r\n.info_lives_icon circle:nth-child(1) {\r\n    animation: info_lives_icon_circle1 3s var(--ease_out) infinite;\r\n}\r\n.info_lives_icon circle:nth-child(2) {\r\n    animation: info_lives_icon_circle2 3s var(--ease_out) infinite;\r\n}\r\n.info_lives_icon circle:nth-child(3) {\r\n    animation: info_lives_icon_circle3 3s var(--ease_out) infinite;\r\n}\r\n@keyframes info_lives_icon_circle1 {\r\n    0% {\r\n        transform: translate(0%, 0%); /* 初始位置 */\r\n    }\r\n    33.3% {\r\n        transform: translate(42.6%, 0%); /* 移动到 (466.86, 182.92) */\r\n    }\r\n    66.6% {\r\n        transform: translate(21.3%, 26.7%); /* 移动到 (327.3, 316.34) */\r\n    }\r\n    100% {\r\n        transform: translate(0%, 0%); /* 返回到起始位置 */\r\n    }\r\n}\r\n\r\n@keyframes info_lives_icon_circle2 {\r\n    0% {\r\n        transform: translate(0%, 0%); /* 初始位置 */\r\n    }\r\n    33.3% {\r\n        transform: translate(-21.3%, 26.7%); /* 移动到 (327.3, 316.34) */\r\n    }\r\n    66.6% {\r\n        transform: translate(-42.6%, 0%); /* 移动到 (187.74, 182.92) */\r\n    }\r\n    100% {\r\n        transform: translate(0%, 0%); /* 返回到起始位置 */\r\n    }\r\n}\r\n@keyframes info_lives_icon_circle3 {\r\n    0% {\r\n        transform: translate(0%, 0%); /* 初始位置 */\r\n    }\r\n    33.3% {\r\n        transform: translate(-21.3%, -26.7%); /* 移动到 (187.74, 182.92) */\r\n    }\r\n    66.6% {\r\n        transform: translate(21.3%, -26.7%); /* 移动到 (466.86, 182.92) */\r\n    }\r\n    100% {\r\n        transform: translate(0%, 0%); /* 返回到起始位置 */\r\n    }\r\n}\r\n\r\n.info_time_icon path {\r\n    fill: var(--color_front);\r\n}\r\n.info_time_icon circle {\r\n    fill: var(--color_front);\r\n    transform-origin: center;\r\n    animation: info_time_icon 1s var(--ease_out) infinite;\r\n}\r\n@keyframes info_time_icon {\r\n    0% {\r\n        transform: translateY(0);\r\n    }\r\n    80% {\r\n        transform: translateY(60%);\r\n    }\r\n    100% {\r\n        transform: translateY(60%);\r\n    }\r\n}\r\n</style>","import script from \"./databox.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./databox.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./databox.vue?vue&type=style&index=0&id=32385105&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-32385105\"]])\n\nexport default __exports__","<template>\r\n    <svg id=\"stage\" class=\"_fullscreen\" />\r\n    <Resettip ref=\"resettip\" />\r\n    <Readytips ref=\"readytips\" />\r\n    <Summary ref=\"summary\" />\r\n    <Databox />\r\n</template>\r\n\r\n<script setup>\r\nimport { global } from \"@/stores/global\";\r\nimport Resettip from \"@/components/game/resettip.vue\";\r\nimport Readytips from \"@/components/game/readytips.vue\";\r\nimport Summary from \"@/components/game/summary.vue\";\r\nimport Databox from \"@/components/game/databox.vue\";\r\nimport { onMounted, ref } from \"vue\";\r\nimport gsap from \"gsap\";\r\nimport forge from \"node-forge\";\r\nconst store = global();\r\nconst player = store.player;\r\nconst audio_controller = store.audio_controller;\r\n// 组件\r\nconst readytips = ref(null);\r\nconst summary = ref(null);\r\nconst resettip = ref(null);\r\n//游戏舞台SVG\r\nlet stage;\r\nlet scale_stander; //缩放标准系数：用于让舞台在不同尺寸的屏幕上保持一致的大小\r\nfunction resize() {\r\n    // 缩放系数以最短边来计算\r\n    scale_stander = innerWidth <= innerHeight ? innerWidth / 1000 : innerHeight / 1000;\r\n    stage.setAttribute(\"viewBox\", `0 0 ${innerWidth} ${innerHeight}`);\r\n    snakeball.resize();\r\n}\r\n// 闪烁：目标元素改变颜色，短时间后回复\r\nfunction flicker(ball, color) {\r\n    gsap.timeline()\r\n        .set(ball, {\r\n            fill: color,\r\n        })\r\n        .set(\r\n            ball,\r\n            {\r\n                fill: \"\",\r\n            },\r\n            \"<0.5\"\r\n        );\r\n}\r\n// snakeball控制对象\r\nconst snakeball = {\r\n    balls: [], //所有的头部/身体svg元素\r\n    // 头部的参考半径/实际半径：用参考半径是为了让snakeball适应不同的屏幕尺寸\r\n    head_radius: {\r\n        ref: 12,\r\n        act: 0,\r\n    },\r\n    // 身体部分的参考半径/实际半径\r\n    body_radius: {\r\n        ref: 6,\r\n        act: 0,\r\n    },\r\n    // 起始xy位置:设置为屏幕左上方外部\r\n    start_x: -20,\r\n    start_y: -20,\r\n    // 水平方向移动距离：用于控制snakeball在水平方向的身体朝向\r\n    distance_x: 0,\r\n    // 移动时间\r\n    duration: {\r\n        smooth: [0, 0.3], //顺滑的移动值区间\r\n        unsmooth: [0.7, 1], //不顺滑的移动值区间\r\n        default: 0.1, //默认值\r\n        act: 0, //实际值\r\n    },\r\n    // 身体的延迟移动间隔时间\r\n    delay: {\r\n        smooth: [0.05, 0.25],\r\n        // delay的不顺滑值有两段，过快或者过慢都会影响玩家的操纵\r\n        unsmooth: [\r\n            [0, 0.01],\r\n            [0.3, 0.5],\r\n        ],\r\n        default: 0.05,\r\n        act: 0,\r\n    },\r\n    // 每一次reset能够顺滑操控snakeball的概率值：获得顺滑duration和delay的概率\r\n    smooth_prob: 0.85,\r\n    // 重置器\r\n    reseter: {\r\n        timer: null, //定时器\r\n        max: 7000, //最长重置间隔时间\r\n        min: 3000, //最短重置间隔时间\r\n        // 启动重置器\r\n        run() {\r\n            this.stop();\r\n            // 设置随机时间触发reset\r\n            this.timer = setTimeout(\r\n                snakeball.reset.bind(snakeball),\r\n                Math.random() * (this.max - this.min) + this.min\r\n            );\r\n        },\r\n        // 停止重置器\r\n        stop() {\r\n            clearTimeout(this.timer);\r\n        },\r\n    },\r\n    resize() {\r\n        // 重新计算头部和身体的实际半径\r\n        this.head_radius.act = this.head_radius.ref * scale_stander;\r\n        this.body_radius.act = this.body_radius.ref * scale_stander;\r\n        // 如果snakeball已经创建，则更改全部半径\r\n        if (!this.balls.length) return;\r\n        this.balls.forEach((ball, index) => {\r\n            if (index === 0) ball.setAttribute(\"r\", this.head_radius.act);\r\n            else ball.setAttribute(\"r\", this.body_radius.act);\r\n        });\r\n    },\r\n    // 创建snakeball\r\n    create(lives) {\r\n        this.balls = []; //清空所有ball\r\n        // 根据当前生命值创建snakeball\r\n        for (let i = 0; i < lives + 1; i++) {\r\n            this.create_ball(i === 0 ? \"head\" : \"body\");\r\n        }\r\n        // 设置默认duration和delay\r\n        this.duration.act = this.duration.default;\r\n        this.delay.act = this.delay.default;\r\n        this.bind_events(); // 绑定事件\r\n        // 将snakeball移动到屏幕中间，即使玩家未移动鼠标\r\n        this.move(innerWidth / 2, innerHeight / 2);\r\n    },\r\n    // 绑定事件:鼠标/手指移动、可以操控snakeball移动\r\n    bind_events() {\r\n        stage.onmousemove = (e) => {\r\n            this.move(e.x, e.y);\r\n        };\r\n        stage.ontouchmove = (e) => {\r\n            this.move(e.touches[0].clientX, e.touches[0].clientY);\r\n        };\r\n    },\r\n    // 创建小球元素：snakeball的头/身体部分\r\n    create_ball(type) {\r\n        let ball = document.createElementNS(\"http://www.w3.org/2000/svg\", \"circle\");\r\n        // 计算xy坐标：用pos_x，pos_y储存位置信息，方便后续不使用DOM方式查找\r\n        ball.pos_x = this.start_x + this.balls.length * this.body_radius.act;\r\n        ball.pos_y = this.start_y;\r\n        // 设置对应DOM属性\r\n        ball.setAttribute(\"fill\", \"var(--color_front)\");\r\n        ball.setAttribute(\"cx\", ball.pos_x);\r\n        ball.setAttribute(\"cy\", ball.pos_y);\r\n        ball.setAttribute(\"r\", type === \"head\" ? this.head_radius.act : this.body_radius.act);\r\n        // 将ball添加到stage和balls数组\r\n        stage.appendChild(ball);\r\n        this.balls.push(ball);\r\n        return ball;\r\n    },\r\n    // 移动snakeball\r\n    move(x, y) {\r\n        let direction_x = x - this.start_x - this.distance_x; //snakeball的水平x轴移动方向\r\n        this.distance_x = x - this.start_x; //更新distance_x\r\n        this.balls.forEach((ball, index) => {\r\n            //计算snakeball的x方向移动距离\r\n            x = this.start_x + index * this.body_radius.act + this.distance_x;\r\n            // 根据移动方向调整身体位置：无论蛇头朝向哪个水平方向，身体总是在蛇头的后面\r\n            if (direction_x > 0 && index !== 0) x -= 2 * index * this.body_radius.act;\r\n            // 移动\r\n            this.set_location(ball, x, y, index);\r\n        });\r\n    },\r\n    // 设置ball的xy坐标位置\r\n    set_location(ball, x, y, index) {\r\n        gsap.to(ball, {\r\n            pos_x: x,\r\n            pos_y: y,\r\n            cx: x,\r\n            cy: y,\r\n            duration: this.duration.act,\r\n            ease: \"linear\",\r\n            delay: index * this.delay.act,\r\n        });\r\n    },\r\n    // 重置snakeball的移动速度、身体延迟移动间隔、以及重置周期\r\n    reset() {\r\n        //播放reset动画和声音\r\n        resettip.value.reset();\r\n        audio_controller.reset.play();\r\n        // 重置duration\r\n        let if_duration_smooth = Math.random() < this.smooth_prob ? \"smooth\" : \"unsmooth\";\r\n        this.duration.act =\r\n            Math.random() *\r\n                (this.duration[if_duration_smooth][1] - this.duration[if_duration_smooth][0]) +\r\n            this.duration[if_duration_smooth][0];\r\n        // 重置delay\r\n        if (Math.random() < this.smooth_prob) {\r\n            // 设置delay为顺滑\r\n            this.delay.act =\r\n                Math.random() * (this.delay.smooth[1] - this.delay.smooth[0]) +\r\n                this.delay.smooth[0];\r\n        } else {\r\n            // 设置delay为不顺滑\r\n            let index = Math.random() >= 0.5 ? 0 : 1; //随机取过快或过慢区间\r\n            this.delay.act =\r\n                Math.random() * (this.delay.unsmooth[index][1] - this.delay.unsmooth[index][0]) +\r\n                this.delay.unsmooth[index][0];\r\n        }\r\n        // 重置reseter\r\n        this.reseter.run();\r\n    },\r\n    // 获得生命值\r\n    get_lives() {\r\n        flicker(this.balls, \"#0ee515\"); // 闪烁颜色\r\n        this.create_ball(\"body\"); // 添加新的身体元素\r\n        player.lives++; //生命值增加\r\n    },\r\n    // 失去生命值\r\n    lost_lives() {\r\n        flicker(this.balls, \"#e3d80f\"); // 闪烁颜色\r\n        // 移除stage以及数组中的ball元素\r\n        stage.removeChild(this.balls[this.balls.length - 1]);\r\n        this.balls.pop();\r\n        player.lives--; //生命值减少\r\n        // 如果生命值小于等于0，则触发游戏失败事件\r\n        if (player.lives <= 0) game_controler.over(false);\r\n    },\r\n    // 摧毁，清除snakeball\r\n    remove() {\r\n        // 移除鼠标事件\r\n        stage.onmousemove = stage.ontouchmove = null;\r\n        // 播放snakeball爆炸动画：这里不清除是因为再开始游戏的时候、会直接清空stage\r\n        gsap.to(this.balls, {\r\n            fill: \"#e3d80f\",\r\n            stroke: \"#dc1130\",\r\n            strokeWidth: this.body_radius.act / 5, //这里用半径计算线条宽度、是为了不让其受屏幕尺寸影响\r\n            r: 2 * this.body_radius.act,\r\n            opacity: 0,\r\n            duration: 0.6,\r\n            ease: \"power3.out\",\r\n            stagger: 0.01,\r\n        });\r\n    },\r\n    // 改变snakeball的颜色，恢复颜色后、执行后续功能\r\n    change_color(color, duration, next) {\r\n        gsap.timeline()\r\n            .set(this.balls, {\r\n                fill: color,\r\n            })\r\n            .set(\r\n                this.balls,\r\n                {\r\n                    fill: \"\",\r\n                    onComplete: () => {\r\n                        if (next) next(); //存在后续功能，则执行\r\n                    },\r\n                },\r\n                `<${duration}` //duration时间后、恢复颜色\r\n            );\r\n    },\r\n};\r\n// 子弹球\r\nclass bulletball {\r\n    constructor(r, pos_x, pos_y, speed_x, speed_y, type, color) {\r\n        this.r = r; //子弹球半径\r\n        this.pos_x = pos_x; // x位置\r\n        this.pos_y = pos_y; // y位置\r\n        this.speed_x = speed_x; //x方向移动速度\r\n        this.speed_y = speed_y; //y方向移动速度\r\n        this.type = type; //子弹球类型\r\n        this.color = color; //子弹球颜色\r\n        this.move_timer = null; //移动定时器\r\n        this.ball = null; ///DOM元素、SVG\r\n        this.if_removed = false; //是否被移除：用于防止子弹球被多次移除导致BUG\r\n    }\r\n    // 创建子弹球\r\n    create() {\r\n        this.ball = document.createElementNS(\"http://www.w3.org/2000/svg\", \"circle\");\r\n        // 设置对应DOM属性\r\n        this.ball.setAttribute(\"cx\", this.pos_x);\r\n        this.ball.setAttribute(\"cy\", this.pos_y);\r\n        this.ball.setAttribute(\"r\", this.r);\r\n        this.ball.setAttribute(\"fill\", this.color);\r\n        // 添加到stage\r\n        stage.appendChild(this.ball);\r\n        // 启动移动定时器：移动子弹球\r\n        this.move_timer = setInterval(this.move.bind(this), 30);\r\n    }\r\n    // 移动子弹球\r\n    move() {\r\n        // 更新xy位置\r\n        this.pos_x += this.speed_x;\r\n        this.pos_y += this.speed_y;\r\n        // 移动子弹球\r\n        gsap.set(this.ball, {\r\n            cx: this.pos_x,\r\n            cy: this.pos_y,\r\n        });\r\n        // 每次移动后，检测是否发生撞击\r\n        this.check_crash();\r\n    }\r\n    // 检测是否与snakeball发生了撞击\r\n    check_crash() {\r\n        for (let i = 0; i < snakeball.balls.length; i++) {\r\n            // 计算到snakeball的头/身体的xy距离\r\n            let distance_x = this.pos_x - snakeball.balls[i].pos_x;\r\n            let distance_y = this.pos_y - snakeball.balls[i].pos_y;\r\n            // 如果撞到了头部:\r\n            if (\r\n                i === 0 &&\r\n                Math.abs(distance_x) <= snakeball.head_radius.act + this.r &&\r\n                Math.abs(distance_y) <= snakeball.head_radius.act + this.r\r\n            )\r\n                // 触发撞击头的事件函数\r\n                return this.crash_head(this);\r\n            // 如果撞到了身体部分:\r\n            else if (\r\n                i !== 0 &&\r\n                Math.abs(distance_x) <= snakeball.body_radius.act + this.r &&\r\n                Math.abs(distance_y) <= snakeball.body_radius.act + this.r\r\n            )\r\n                // 触发撞击身体部分的事件函数;\r\n                return this.crash_body(this);\r\n        }\r\n        // 如果子弹球移出界面范围，则直接被移除\r\n        if (\r\n            this.pos_x > innerWidth + this.r ||\r\n            this.pos_x < -this.r ||\r\n            this.pos_y > innerHeight + this.r ||\r\n            this.pos_y < -this.r\r\n        )\r\n            return this.remove();\r\n    }\r\n    // 碰撞到snakeball头部\r\n    crash_head(ball) {\r\n        player.score += launcher.types[this.type].score; //获得对应的分数\r\n        this.remove(); // 子弹球直接被移除\r\n        let trigger_head = launcher.types[this.type].trigger_head.bind(this); //触发撞击头部的事件函数\r\n        return trigger_head();\r\n    }\r\n    // 碰撞到snakeball身体部分\r\n    crash_body(ball) {\r\n        player.score += launcher.types[this.type].score; //获得对应的分数\r\n        this.destroy(); // 子弹球爆炸摧毁并被移除\r\n        let trigger_body = launcher.types[this.type].trigger_body.bind(this); //触发撞击身体的事件功能\r\n        return trigger_body();\r\n    }\r\n    // 摧毁子弹球\r\n    destroy() {\r\n        this.if_removed = true; //标记被移除\r\n        clearInterval(this.move_timer); //清除移动定时器\r\n        // 随机播放爆炸音效\r\n        audio_controller.blasts[parseInt(Math.random() * audio_controller.blasts.length)].play();\r\n        // 播放爆炸动画\r\n        gsap.to(this.ball, {\r\n            fill: \"#e3d80f\",\r\n            stroke: \"#dc1130\",\r\n            strokeWidth: this.r / 5,\r\n            r: 2 * this.r,\r\n            opacity: 1, //恢复透明度：小球爆炸时可能在隐身状态，但是需要其爆炸可以被看到\r\n            duration: 0.3,\r\n            ease: \"power3.out\",\r\n            onComplete: () => {\r\n                this.remove(); // 动画完成之后,再移除子弹球\r\n            },\r\n        });\r\n    }\r\n    // 移除子弹球\r\n    remove() {\r\n        this.if_removed = true; //标记被移除\r\n        clearInterval(this.move_timer); //清除移动定时器\r\n        // 从stage和launcher中移除子弹球\r\n        stage.removeChild(this.ball);\r\n        delete launcher.balls[this.index];\r\n    }\r\n}\r\n// 炮台：子弹球发射器\r\nconst launcher = {\r\n    // 所有种类的子弹球\r\n    types: {\r\n        // 火球：碰撞到头部失去一条生命值\r\n        fireball: {\r\n            type: \"fireball\",\r\n            r: 6, //参考半径\r\n            color: \" #dc1130\", //颜色\r\n            score: 1, //碰撞所获得的得分\r\n            prob: 0, //发射该子弹球的概率\r\n            // 碰到头部触发的事件\r\n            trigger_head() {\r\n                audio_controller.warn.play(); //播放警示音效\r\n                snakeball.lost_lives(); //snakeball失去一条生命\r\n            },\r\n            // 碰到身体部分触发的事件\r\n            trigger_body() {},\r\n        },\r\n        // 医药球：碰撞到头部增加一条生命值\r\n        medicineball: {\r\n            type: \"medicineball\",\r\n            r: 12,\r\n            color: \" #0ee515\",\r\n            score: 3,\r\n            prob: 0.85,\r\n            trigger_head() {\r\n                audio_controller.buff.play(); //播放增益效果音效\r\n                snakeball.get_lives(); //snakeball获得一条生命\r\n            },\r\n            trigger_body() {},\r\n        },\r\n        // 冷冻球\r\n        frozenball: {\r\n            type: \"frozenball\",\r\n            r: 10,\r\n            color: \" #16b7df\",\r\n            score: 5,\r\n            prob: 0.95,\r\n            // 短时间内，减速屏幕内所有子弹球\r\n            trigger_head() {\r\n                audio_controller.buff.play(); //播放增益效果音效\r\n                Object.values(launcher.balls).forEach((ball) => {\r\n                    flicker(ball.ball, \"#16b7df\"); // 闪烁子弹球颜色\r\n                    // 减慢子弹球速度\r\n                    ball.speed_x /= 20;\r\n                    ball.speed_y /= 20;\r\n                    // 一段时间后减速失效\r\n                    setTimeout(() => {\r\n                        ball.speed_x *= 20;\r\n                        ball.speed_y *= 20;\r\n                    }, 1000);\r\n                });\r\n            },\r\n            // 冰冻减速snakeball\r\n            trigger_body() {\r\n                // 判断是否在冰冻生效时间中：临时储存snakeball的duration和delay\r\n                if (!launcher.types[\"frozenball\"].if_effected) {\r\n                    launcher.types[\"frozenball\"].if_effected = true;\r\n                    launcher.types[\"frozenball\"].tem_duration = snakeball.duration.act;\r\n                    launcher.types[\"frozenball\"].tem_delay = snakeball.delay.act;\r\n                } else {\r\n                    // 储存并清除定时器：防止多次触发、定时器堆叠导致效果时长不够\r\n                    if (launcher.types[\"frozenball\"].timer)\r\n                        clearTimeout(launcher.types[\"frozenball\"].timer);\r\n                }\r\n                // 设置最大延迟的duration和delay: 使snakeball移动变慢;\r\n                snakeball.duration.act = snakeball.duration.unsmooth[1];\r\n                snakeball.delay.act = snakeball.delay.unsmooth[1][1];\r\n                // 标识颜色\r\n                gsap.set(snakeball.balls, {\r\n                    fill: \"#16b7df\",\r\n                });\r\n                // 短时间后，恢复原始发射频率\r\n                launcher.types[\"frozenball\"].timer = setTimeout(() => {\r\n                    launcher.types[\"frozenball\"].if_effected = false;\r\n                    // 恢复duration和delay\r\n                    snakeball.duration.act = launcher.types[\"frozenball\"].tem_duration;\r\n                    snakeball.delay.act = launcher.types[\"frozenball\"].tem_delay;\r\n                    // 恢复颜色\r\n                    gsap.set(snakeball.balls, {\r\n                        fill: \"\",\r\n                    });\r\n                }, 800);\r\n            },\r\n        },\r\n        // 伸缩球\r\n        scaleball: {\r\n            type: \"scaleball\",\r\n            r: 15,\r\n            color: \" #a37e22\",\r\n            score: 5,\r\n            prob: 0.96,\r\n            // 短时间内，snakeball半径变小，不容易撞到子弹球\r\n            trigger_head() {\r\n                audio_controller.buff.play(); //播放增益效果音效\r\n                // 缩小snakeball半径\r\n                snakeball.head_radius.act = (snakeball.head_radius.ref * scale_stander) / 2;\r\n                snakeball.body_radius.act = (snakeball.body_radius.ref * scale_stander) / 2;\r\n                // 设置snakeball颜色和半径\r\n                gsap.set(snakeball.balls, {\r\n                    fill: \"#a37e22\",\r\n                    r: (i) => {\r\n                        return i === 0 ? snakeball.head_radius.act : snakeball.body_radius.act;\r\n                    },\r\n                });\r\n                // 储存并清除定时器：防止多次触发、定时器堆叠导致效果时长不够\r\n                if (launcher.types[\"scaleball\"].timer)\r\n                    clearTimeout(launcher.types[\"scaleball\"].timer);\r\n                // 一段时间后，恢复颜色和正常大小\r\n                launcher.types[\"scaleball\"].timer = setTimeout(() => {\r\n                    snakeball.head_radius.act = snakeball.head_radius.ref * scale_stander;\r\n                    snakeball.body_radius.act = snakeball.body_radius.ref * scale_stander;\r\n                    gsap.set(snakeball.balls, {\r\n                        fill: \"\",\r\n                        r: \"\",\r\n                    });\r\n                }, 3000);\r\n            },\r\n            // 界面范围内的所有子弹球变成原来的三倍大\r\n            trigger_body() {\r\n                Object.values(launcher.balls).forEach((ball) => {\r\n                    // 限制子弹球最大为原来半径的9倍，防止该函数多次被触发，子弹球变得过大\r\n                    if (ball.r / launcher.types[ball.type].r / scale_stander >= 9) return;\r\n                    ball.r *= 3;\r\n                    // 更改子弹球半径\r\n                    gsap.set(ball.ball, {\r\n                        r: ball.r,\r\n                    });\r\n                    flicker(ball.ball, \"#a37e22\"); // 闪烁子弹球颜色\r\n                });\r\n            },\r\n        },\r\n        // 分裂球\r\n        splitball: {\r\n            type: \"splitball\",\r\n            r: 12,\r\n            color: \" #ef7706\",\r\n            score: 5,\r\n            prob: 0.96,\r\n            // 分裂一条相同长度的snakeball，与玩家同步运动\r\n            trigger_head() {\r\n                audio_controller.buff.play(); //播放增益效果音效\r\n                let tem_lives = player.lives; //暂存生命，方便后续移除对应生命值\r\n                // 创建新增身体，并设置新增部分颜色\r\n                for (let i = 0; i < tem_lives; i++) {\r\n                    let ball = snakeball.create_ball(\"body\");\r\n                    gsap.set(ball, {\r\n                        fill: \"#ef7706\",\r\n                    });\r\n                }\r\n                // 修改移动方法：使新增身体分裂位移\r\n                snakeball.set_location = (ball, x, y, index) => {\r\n                    // 设置新增身体与原位置偏移\r\n                    let add_x = (parseInt(index / (player.lives + 1)) * innerWidth) / 8;\r\n                    let add_y = (parseInt(index / (player.lives + 1)) * innerHeight) / 8;\r\n                    gsap.to(ball, {\r\n                        pos_x: x + add_x,\r\n                        pos_y: y + add_y,\r\n                        cx: x + add_x,\r\n                        cy: y + add_y,\r\n                        duration: snakeball.duration.act,\r\n                        ease: \"linear\",\r\n                        delay: (index % (player.lives + 1)) * snakeball.delay.act,\r\n                    });\r\n                };\r\n                // 一段时间后恢复\r\n                setTimeout(() => {\r\n                    // 移除新增的身体\r\n                    for (let i = 0; i < tem_lives; i++) {\r\n                        stage.removeChild(snakeball.balls[snakeball.balls.length - 1]);\r\n                        snakeball.balls.pop();\r\n                    }\r\n                    // 恢复移动方法：这里不能临时储存方法然后替换回去，如果多次触发的话，会出BUG\r\n                    snakeball.set_location = (ball, x, y, index) => {\r\n                        gsap.to(ball, {\r\n                            pos_x: x,\r\n                            pos_y: y,\r\n                            cx: x,\r\n                            cy: y,\r\n                            duration: snakeball.duration.act,\r\n                            ease: \"linear\",\r\n                            delay: index * snakeball.delay.act,\r\n                        });\r\n                    };\r\n                }, 3000);\r\n            },\r\n            // 在爆炸处分裂火球\r\n            trigger_body() {\r\n                // 生成随机数个火球\r\n                for (let i = 0; i < Math.random() * 10 + 10; i++) {\r\n                    // 每一次爆炸，必分裂出一个分裂球\r\n                    let type = i === 0 ? \"splitball\" : \"fireball\";\r\n                    // 设置对应属性\r\n                    let r = launcher.types[type].r * scale_stander;\r\n                    let color = launcher.types[type].color;\r\n                    let pos_x = this.pos_x;\r\n                    let pos_y = this.pos_y;\r\n                    let speed_x = (Math.random() - 0.5) * 2 * launcher.max_speed * scale_stander;\r\n                    let speed_y = (Math.random() - 0.5) * 2 * launcher.max_speed * scale_stander;\r\n                    // 生成子弹球对象\r\n                    let ball = new bulletball(r, pos_x, pos_y, speed_x, speed_y, type, color);\r\n                    // 将子弹球用index标记，并储存到balls，方便查找\r\n                    ball.index = launcher.index;\r\n                    launcher.balls[launcher.index] = ball;\r\n                    // 创建子弹球\r\n                    ball.create();\r\n                    launcher.index++;\r\n                }\r\n            },\r\n        },\r\n        // 磁力球\r\n        magneticball: {\r\n            type: \"magneticball\",\r\n            r: 15,\r\n            color: \" #113ede\",\r\n            score: 8,\r\n            prob: 0.985,\r\n            // 界面内范围内的所有子弹球、全部移向snakeball的头部位置\r\n            trigger_head() {\r\n                audio_controller.buff.play(); //播放增益效果音效\r\n                Object.values(launcher.balls).forEach((ball) => {\r\n                    // 计算随机更新子弹球的速度，30毫秒是子弹球移动频率\r\n                    ball.speed_x = (this.pos_x - ball.pos_x) / 30 / (Math.random() * 0.5 + 1);\r\n                    ball.speed_y = (this.pos_y - ball.pos_y) / 30 / (Math.random() * 0.5 + 1);\r\n                    flicker(ball.ball, \"#113ede\"); // 闪烁子弹球颜色\r\n                });\r\n            },\r\n            // snakeball被吸到磁力球爆炸的位置\r\n            trigger_body() {\r\n                // 移除鼠标事件:短时间内无法操控snakeball\r\n                stage.onmousemove = null;\r\n                stage.ontouchmove = null;\r\n                // 移动snakeball到子弹球爆炸位置\r\n                snakeball.move(this.pos_x, this.pos_y);\r\n                // 一段时间后恢复\r\n                snakeball.change_color(\"#113ede\", 1, () => {\r\n                    // 重新绑定事件，可再次操控snakeball\r\n                    snakeball.bind_events();\r\n                });\r\n            },\r\n        },\r\n        // 影子球\r\n        shadowball: {\r\n            type: \"shadowball\",\r\n            r: 10,\r\n            color: \" #9f4df0\",\r\n            score: 8,\r\n            prob: 0.985,\r\n            // 短时间内、让与snakeball碰撞的子弹球、瞬移到snakeball头的周围并减速\r\n            trigger_head() {\r\n                audio_controller.buff.play(); //播放增益效果音效\r\n                // 更改子弹球身体碰撞方法\r\n                bulletball.prototype.crash_body = (ball) => {\r\n                    if (ball.type != \"fireball\") {\r\n                        // 非火球则移动到snakeball头部的位置周围\r\n                        ball.pos_x = snakeball.balls[0].pos_x + Math.random() * 200 - 100;\r\n                        ball.pos_y = snakeball.balls[0].pos_y + Math.random() * 200 - 100;\r\n                        // 减速\r\n                        ball.speed_x /= 5;\r\n                        ball.speed_y /= 5;\r\n                        flicker(ball.ball, \"#9f4df0\"); // 闪烁子弹球颜色\r\n                    } else {\r\n                        // 是火球则正常加分\r\n                        player.score += launcher.types[ball.type].score;\r\n                        ball.destroy();\r\n                    }\r\n                };\r\n                // 标识snakeball颜色\r\n                gsap.set(snakeball.balls, {\r\n                    fill: \"#9f4df0\",\r\n                });\r\n                // 储存并清除定时器：防止多次触发、定时器堆叠导致效果时长不够\r\n                if (launcher.types[\"shadowball\"].timer)\r\n                    clearTimeout(launcher.types[\"shadowball\"].timer);\r\n                // 一段时间后恢复\r\n                launcher.types[\"shadowball\"].timer = setTimeout(() => {\r\n                    // 恢复身体碰撞方法:这里不能临时储存方法然后替换回去，如果多次触发的话，会出BUG\r\n                    bulletball.prototype.crash_body = (ball) => {\r\n                        player.score += launcher.types[ball.type].score;\r\n                        ball.destroy();\r\n                        let trigger_body = launcher.types[ball.type].trigger_body.bind(ball);\r\n                        return trigger_body();\r\n                    };\r\n                    gsap.set(snakeball.balls, {\r\n                        fill: \"\",\r\n                    });\r\n                }, 3000);\r\n            },\r\n            // 短时间后、让所有子弹球随机改变位置\r\n            trigger_body() {\r\n                // 设置颜色预警\r\n                Object.values(launcher.balls).forEach((ball) => {\r\n                    gsap.set(ball.ball, {\r\n                        fill: \"#9f4df0\",\r\n                    });\r\n                });\r\n                // 一段时间后,随机设置所有子弹球位置\r\n                setTimeout(() => {\r\n                    Object.values(launcher.balls).forEach((ball) => {\r\n                        // 恢复颜色\r\n                        gsap.set(ball.ball, {\r\n                            fill: \"\",\r\n                        });\r\n                        // 随机子弹球设置xy位置\r\n                        ball.pos_x = Math.random() * innerWidth;\r\n                        ball.pos_y = Math.random() * innerHeight;\r\n                    });\r\n                }, 500);\r\n            },\r\n        },\r\n        // 隐身球\r\n        invisibleball: {\r\n            type: \"invisibleball\",\r\n            r: 15,\r\n            color: \" #808080\",\r\n            score: 10,\r\n            prob: 0.985,\r\n            // 短时间内让snakeball隐身，无法碰撞到子弹球\r\n            trigger_head() {\r\n                audio_controller.buff.play(); //播放增益效果音效\r\n                // 临时储存check_crash方法，方便后续替换回去，这里可以用临时储存的方法，因为不存在多次触发的情况\r\n                let tem_check_crash = bulletball.prototype.check_crash;\r\n                // 移除子弹球的撞击检测方法：让子弹球无法撞击snakeball\r\n                bulletball.prototype.check_crash = () => {};\r\n                // 设置snakeball半透明\r\n                gsap.set(snakeball.balls, {\r\n                    opacity: 0.5,\r\n                });\r\n                // 一段时间后恢复\r\n                setTimeout(() => {\r\n                    // 恢复子弹球撞击检测\r\n                    bulletball.prototype.check_crash = tem_check_crash;\r\n                    // 如果游戏还在进行中：则恢复snakeball透明度\r\n                    if (game_controler.if_gaming)\r\n                        gsap.set(snakeball.balls, {\r\n                            opacity: 1,\r\n                        });\r\n                }, 3000);\r\n            },\r\n            // 短时间内让所有子弹球隐身\r\n            trigger_body() {\r\n                // 设置所有子弹球透明度为0\r\n                Object.values(launcher.balls).forEach((ball) => {\r\n                    gsap.to(ball.ball, {\r\n                        opacity: 0,\r\n                        duration: 0.5,\r\n                        ease: \"power3.out\",\r\n                    });\r\n                });\r\n                // 储存并清除定时器：防止多次触发，造成子弹球闪烁以及隐身时长不够\r\n                if (launcher.types[\"invisibleball\"].timer)\r\n                    clearTimeout(launcher.types[\"invisibleball\"].timer);\r\n                // 一段时间后，撤销隐身效果\r\n                launcher.types[\"invisibleball\"].timer = setTimeout(() => {\r\n                    // 如果游戏还在进行中：恢复所有子弹球透明度\r\n                    if (game_controler.if_gaming)\r\n                        Object.values(launcher.balls).forEach((ball) => {\r\n                            gsap.to(ball.ball, {\r\n                                opacity: 1,\r\n                                duration: 0.5,\r\n                                ease: \"power3.out\",\r\n                            });\r\n                        });\r\n                }, 3000);\r\n            },\r\n        },\r\n        // 信号球\r\n        signalball: {\r\n            type: \"signalball\",\r\n            r: 8,\r\n            color: \" #ea4fc0\",\r\n            score: 20,\r\n            prob: 0.99,\r\n            // 短时间内生成大量身体，但不增加生命，一段时间后恢复\r\n            trigger_head() {\r\n                audio_controller.buff.play(); //播放增益效果音效\r\n                // 使snakeball有一个顺滑的操控\r\n                snakeball.duration.act = snakeball.duration.default;\r\n                snakeball.delay.act = 0.02;\r\n                // 创建身体\r\n                for (let i = 0; i < 50; i++) {\r\n                    snakeball.create_ball(\"body\");\r\n                }\r\n                // 标识snakeball颜色，一段时间后恢复\r\n                snakeball.change_color(\"#ea4fc0\", 3, () => {\r\n                    // 移除新增的身体，恢复颜色\r\n                    for (let i = 0; i < 50; i++) {\r\n                        stage.removeChild(snakeball.balls[snakeball.balls.length - 1]);\r\n                        snakeball.balls.pop();\r\n                    }\r\n                });\r\n            },\r\n            // 短时间内，涌出大量子弹球\r\n            trigger_body() {\r\n                // 重置launcher的定时器，设置发射频率极高\r\n                clearInterval(launcher.timer);\r\n                launcher.timer = setInterval(launcher.launch.bind(launcher), 1);\r\n                // 设置在大量发射子弹球的时间段里面、不再发射信号球，避免造成超多子弹球，极易让玩家死亡\r\n                launcher.types[\"signalball\"].prob = 2;\r\n                // 储存并清除定时器：防止多次触发、定时器堆叠导致效果时长不够\r\n                if (launcher.types[\"signalball\"].timer)\r\n                    clearTimeout(launcher.types[\"signalball\"].timer);\r\n                // 短时间后，恢复原始发射频率\r\n                launcher.types[\"signalball\"].timer = setTimeout(() => {\r\n                    // 恢复信号球发射概率\r\n                    launcher.types[\"signalball\"].prob = 0.99;\r\n                    clearInterval(launcher.timer);\r\n                    // 如果游戏还在进行中：用原频率重新启动炮台，这里一定要确定游戏还在进行，否则会出BUG\r\n                    if (game_controler.if_gaming)\r\n                        launcher.timer = setInterval(\r\n                            launcher.launch.bind(launcher),\r\n                            launcher.frequency\r\n                        );\r\n                }, 800);\r\n            },\r\n        },\r\n        // 核弹球\r\n        hball: {\r\n            type: \"hball\",\r\n            r: 30,\r\n            color: \" #046312\",\r\n            score: 50,\r\n            prob: 0.995,\r\n            // 界面范围内所有子弹球爆炸，并获取对应得分\r\n            trigger_head() {\r\n                audio_controller.buff.play(); //播放增益效果音效\r\n                Object.values(launcher.balls).forEach((ball) => {\r\n                    player.score += launcher.types[ball.type].score;\r\n                    if (!ball.if_removed) ball.destroy();\r\n                });\r\n            },\r\n            // 直接丢失5条生命值\r\n            trigger_body() {\r\n                audio_controller.warn.play(); //播放警示音效\r\n                for (let i = 0; i <= 5; i++) {\r\n                    // 如果玩家已经死亡：则不执行，否则会报错\r\n                    if (player.lives > 0) snakeball.lost_lives();\r\n                }\r\n            },\r\n        },\r\n    },\r\n    balls: {}, //所有的子弹球：这里用对象储存以方便查找指定子弹球\r\n    index: 0, //计数：用于查找子弹球\r\n    frequency: 250, //发射频率\r\n    max_speed: 10, //子弹球本局游戏最高可达的移动速度\r\n    timer: null, //发射定时器\r\n    // 运行launcher\r\n    run() {\r\n        // 更新所有子弹球和index\r\n        this.balls = {};\r\n        this.index = 0;\r\n        // 开启定时器，发射子弹球\r\n        this.timer = setInterval(this.launch.bind(this), this.frequency);\r\n    },\r\n    // 发射子弹球\r\n    launch() {\r\n        let r, pos_x, pos_y, speed_x, speed_y, type, color;\r\n        // 设置随机种类的子弹球\r\n        Object.values(this.types).forEach((ball) => {\r\n            if (Math.random() > ball.prob) return (type = ball.type);\r\n        });\r\n        r = this.types[type].r * scale_stander;\r\n        color = this.types[type].color;\r\n        // 设置子弹球从界面外部的进入方向\r\n        let direction = Math.floor(Math.random() * 4);\r\n        switch (direction) {\r\n            case 0: // 从左侧进入\r\n                pos_x = -r; // 球的初始位置在视图左侧外\r\n                speed_x = Math.random() * this.max_speed * scale_stander + 1; // 速度向右\r\n                pos_y = Math.random() * innerHeight; // 随机垂直位置\r\n                speed_y = (Math.random() - 0.5) * 2 * this.max_speed * scale_stander; // 随机垂直速度，可以是向上或向下\r\n                break;\r\n            case 1: // 从右侧进入\r\n                pos_x = innerWidth + r; // 球的初始位置在视图右侧外\r\n                speed_x = Math.random() * -this.max_speed * scale_stander - 1; // 速度向左\r\n                pos_y = Math.random() * innerHeight; // 随机垂直位置\r\n                speed_y = (Math.random() - 0.5) * 2 * this.max_speed * scale_stander; // 随机垂直速度，可以是向上或向下\r\n                break;\r\n            case 2: // 从上方进入\r\n                pos_y = -r; // 球的初始位置在视图上方外\r\n                speed_y = Math.random() * this.max_speed * scale_stander + 1; // 速度向下\r\n                pos_x = Math.random() * innerWidth; // 随机水平位置\r\n                speed_x = (Math.random() - 0.5) * 2 * this.max_speed * scale_stander; // 随机水平速度，可以是向左或向右\r\n                break;\r\n            case 3: // 从下方进入\r\n                pos_y = innerHeight + r; // 球的初始位置在视图下方外\r\n                speed_y = Math.random() * -this.max_speed * scale_stander - 1; // 速度向上\r\n                pos_x = Math.random() * innerWidth; // 随机水平位置\r\n                speed_x = (Math.random() - 0.5) * 2 * this.max_speed * scale_stander; // 随机水平速度，可以是向左或向右\r\n                break;\r\n        }\r\n        // 生成子弹球对象\r\n        let ball = new bulletball(r, pos_x, pos_y, speed_x, speed_y, type, color);\r\n        // 将子弹球用index标记，并储存到balls，方便查找\r\n        ball.index = this.index;\r\n        this.balls[this.index] = ball;\r\n        // 创建子弹球\r\n        ball.create();\r\n        this.index++;\r\n    },\r\n    // 摧毁所有子弹球\r\n    destroy() {\r\n        clearInterval(this.timer); //清除发射定时器\r\n        // 这里只给所有子弹球播放爆炸动画、而不清除，是因为后面再次游戏时，会直接清除整个stage\r\n        Object.values(this.balls).forEach((ball) => {\r\n            clearInterval(ball.move_timer);\r\n            gsap.to(ball.ball, {\r\n                fill: \"#e3d80f\",\r\n                stroke: \"#dc1130\",\r\n                strokeWidth: ball.r / 5, //这里用半径计算线条宽度、是为了不让其受屏幕尺寸影响\r\n                r: 2 * ball.r,\r\n                opacity: 0,\r\n                duration: 0.3,\r\n                ease: \"power3.out\",\r\n            });\r\n        });\r\n    },\r\n};\r\n// 游戏控制器\r\nconst game_controler = {\r\n    // wave关卡控制器\r\n    waver: {\r\n        timer: null, //定时器\r\n        default_time: 40, //每一关的默认时长\r\n    },\r\n    initial_lives: 20, //玩家的初始生命值\r\n    if_gaming: false, //是否在进行游戏中\r\n    // 创建关卡：一般关卡会在游戏正式开始之前创建\r\n    create_wave() {\r\n        stage.innerHTML = \"\"; //清空游戏舞台\r\n        // 如果玩家未激活：已死亡/首次创建\r\n        if (!player.if_active) {\r\n            // 设置默认玩家信息\r\n            player.if_active = true; //激活玩家\r\n            player.wave = player.rank = player.score = 0;\r\n            player.lives = this.initial_lives;\r\n        }\r\n        this.upgrade(); //升级游戏：设置关卡难度参数\r\n        player.time = this.waver.default_time; //重置游戏时间\r\n        snakeball.create(player.lives); //创建snakeball\r\n    },\r\n    // 正式开始游戏\r\n    start() {\r\n        this.if_gaming = true;\r\n        audio_controller.gameing.play(); //播放游戏音乐\r\n        snakeball.reseter.run(); //启动reseter：开始周期重置snakeball\r\n        launcher.run(); //开始发射子弹球\r\n        // 开启waver：进行倒计时，倒计时完成、则结束关卡\r\n        this.waver.timer = setInterval(() => {\r\n            player.time--;\r\n            // 倒计时结束，并且玩家未死亡：游戏关卡胜利\r\n            if (player.time <= 0 && player.if_active) this.over(true);\r\n        }, 1000);\r\n    },\r\n    // 游戏结束\r\n    over(if_win) {\r\n        this.if_gaming = false;\r\n        // this.post(); //提交玩家数据\r\n        this.clean(); //清扫游戏舞台\r\n        // 停止游戏音乐、并播放大厅音乐\r\n        audio_controller.gameing.stop();\r\n        audio_controller.hall.play();\r\n        audio_controller.hall.fade(0, 1, 9000);\r\n        //显示总结面板\r\n        summary.value.show();\r\n        // 游戏关卡胜利\r\n        if (if_win) audio_controller.win.play();\r\n        // 游戏关卡失败\r\n        else {\r\n            audio_controller.fail.play();\r\n            // 设置玩家未激活：即死亡，并归零游戏时间\r\n            player.if_active = false;\r\n            player.time = 0;\r\n        }\r\n    },\r\n    // 清扫游戏舞台\r\n    clean() {\r\n        clearInterval(this.waver.timer);\r\n        launcher.destroy();\r\n        snakeball.remove();\r\n        snakeball.reseter.stop();\r\n    },\r\n    // 升级\r\n    upgrade() {\r\n        player.wave++;\r\n        // 升级频率: 频率范围为250-40，增长速度为曲线，先快后慢、最后平稳\r\n        launcher.frequency = 40 + (250 - 40) * Math.exp(-0.08 * player.wave);\r\n        // 升级速度: 速度范围为10-25，增长速度同上\r\n        launcher.max_speed = 10 + (25 - 10) * (1 - Math.exp(-0.08 * player.wave));\r\n        // 加快游戏音乐，音乐速度范围为1-2\r\n        audio_controller.gameing.rate(1 + (2 - 1) * (1 - Math.exp(-0.08 * player.wave)));\r\n    },\r\n    // 提交玩家数据\r\n    post() {\r\n        let data = {\r\n            id: player.id,\r\n            name: player.name,\r\n            wave: player.wave,\r\n            lives: player.lives,\r\n            score: player.score,\r\n        };\r\n        // RAS加密\r\n        const public_key = forge.pki.publicKeyFromPem(`-----BEGIN PUBLIC KEY-----\r\nxxxxxxx\r\n-----END PUBLIC KEY-----`);\r\n        // 生成加密数据\r\n        const encrypted_data = public_key.encrypt(JSON.stringify(data), \"RSA-OAEP\", {\r\n            md: forge.md.sha256.create(),\r\n        });\r\n        // 将加密数据转换为Base64\r\n        const encrypted_base64 = forge.util.encode64(encrypted_data);\r\n        // 发送数据\r\n        let xhr = new XMLHttpRequest();\r\n        xhr.open(\"POST\", \"https://put_your_server.com/api\", true);\r\n        xhr.setRequestHeader(\"Content-type\", \"application/json\");\r\n        xhr.send(JSON.stringify({ encrypted_data: encrypted_base64 }));\r\n    },\r\n};\r\n// 储存全局功能函数\r\nstore.ready_to_game = () => {\r\n    // 在准备提示出现前，就创建关卡、可以看到snakeball。准备提示结束之后，才正式开始游戏\r\n    readytips.value.ready(\r\n        game_controler.create_wave.bind(game_controler),\r\n        game_controler.start.bind(game_controler)\r\n    );\r\n};\r\nonMounted(() => {\r\n    stage = document.querySelector(\"#stage\");\r\n    window.addEventListener(\"resize\", resize);\r\n    resize();\r\n});\r\n</script>\r\n","import script from \"./stage.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./stage.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__","import script from \"./App.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./App.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./App.vue?vue&type=style&index=0&id=200c599c&lang=css\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { createApp } from 'vue'\r\nimport { createPinia } from 'pinia'\r\nimport App from './App.vue'\r\n\r\nconst pinia = createPinia()\r\ncreateApp(App).use(pinia).mount('#app')\r\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","var deferred = [];\n__webpack_require__.O = function(result, chunkIds, fn, priority) {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar chunkIds = deferred[i][0];\n\t\tvar fn = deferred[i][1];\n\t\tvar priority = deferred[i][2];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every(function(key) { return __webpack_require__.O[key](chunkIds[j]); })) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","__webpack_require__.p = \"\";","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t524: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = function(chunkId) { return installedChunks[chunkId] === 0; };\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = function(parentChunkLoadingFunction, data) {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some(function(id) { return installedChunks[id] !== 0; })) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunksnakeball\"] = self[\"webpackChunksnakeball\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [504], function() { return __webpack_require__(266); })\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["global","defineStore","state","if_safari","test","navigator","userAgent","includes","InstallTrigger","player","id","name","rank","wave","lives","score","time","if_active","audio_controller","hall","Howl","src","require","preload","loop","gameing","win","fail","button","ready","reset","buff","warn","blasts","hidden_loading","show_welcome","hidden_welcome","show_start","hidden_start","show_instrution","show_rank","ready_to_game","hidden_summary","show_databox","hidden_databox","show_menu","hidden_menu","actions","init_player_data","this","Date","now","Math","random","toString","substring","first_show","play","welcome_to_start","start_to_welcome","start_new_game","stop","welcome_continue_game","summary_to_welcome","summary_continue_game","store","welcome","container","middle","title","bigball","smallballs","line","balls","title_letters","nav","info","max_distance","animater","if_visible","ref","init","document","querySelector","querySelectorAll","window","addEventListener","resize","bind","binded_events","offsetWidth","onmousemove","e","move_title","x","y","ontouchmove","touches","clientX","clientY","onmouseout","innerWidth","innerHeight","ontouchend","move_smallballs","distance_x","distance_y","gsap","to","duration","ease","min","max","stagger","timeline","set","scale","opacity","clipPath","classList","remove","show","isActive","value","each","from","onStart","add","hidden","immediate","next","onComplete","onMounted","__exports__","props","__props","if_reverse","start","inputbox","background","usetip","closebtn","ball","input","input_text","max_text_length","length","slice","keyCode","check_input","trim","backgroundColor","transform","version","xmlns","viewBox","style","_createElementBlock","_hoisted_1","_cache","_createStaticVNode","script","render","instrution","circle","lines","images","players_data","engine","world","edges","if_run_engine","current_index","create_engine","create_bady","Engine","create","constraintIterations","Composite","body","create_edges","forEach","view_width","view_height","Bodies","rectangle","isStatic","init_balls","index","row","parseInt","left","top","ele","if_static","rect","getBoundingClientRect","width","run_engine","update","speed","position","offsetHeight","rotate","angle","requestAnimationFrame","gravity","get_rank_list","response","fetch","json","data","get_rank","request","XMLHttpRequest","open","setRequestHeader","send","JSON","stringify","onreadystatechange","status","readyState","parse","responseText","mouse_x","mouse_y","move_balls","reset_balls","abs","current_colormode","switch_colormode","toggle","if_mute","switch_mutemode","Howler","mute","links","copyright","loading","icon","paths","tip","mask","fromTo","strokeDashoffset","i","finish","restart","strokeWidth","strokeDasharray","cursor","circles","__expose","tip_texts","summary","inner_texts","visibility","databox","readytips","resettip","stage","scale_stander","setAttribute","snakeball","flicker","color","fill","head_radius","act","body_radius","start_x","start_y","smooth","unsmooth","default","delay","smooth_prob","reseter","timer","run","setTimeout","clearTimeout","create_ball","bind_events","move","type","createElementNS","pos_x","pos_y","appendChild","push","direction_x","set_location","cx","cy","if_duration_smooth","get_lives","lost_lives","removeChild","pop","game_controler","over","stroke","r","change_color","bulletball","constructor","speed_x","speed_y","move_timer","if_removed","setInterval","check_crash","crash_head","crash_body","launcher","types","trigger_head","destroy","trigger_body","clearInterval","fireball","prob","medicineball","frozenball","Object","values","if_effected","tem_duration","tem_delay","scaleball","splitball","tem_lives","add_x","add_y","max_speed","magneticball","shadowball","prototype","invisibleball","tem_check_crash","if_gaming","signalball","launch","frequency","hball","direction","floor","waver","default_time","initial_lives","create_wave","innerHTML","upgrade","if_win","clean","fade","exp","rate","post","public_key","forge","publicKeyFromPem","encrypted_data","encrypt","md","sha256","encrypted_base64","encode64","xhr","pinia","createPinia","createApp","App","use","mount","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","exports","module","__webpack_modules__","call","m","deferred","O","result","chunkIds","fn","priority","notFulfilled","Infinity","fulfilled","j","keys","every","key","splice","n","getter","__esModule","d","a","definition","o","defineProperty","enumerable","get","g","globalThis","Function","obj","prop","hasOwnProperty","p","installedChunks","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","some","chunkLoadingGlobal","self","__webpack_exports__"],"sourceRoot":""}